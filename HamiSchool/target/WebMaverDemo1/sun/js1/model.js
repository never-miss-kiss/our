$(".reply_list").find(".reply_list_img").find("input[type=checkbox]").prop("checked",false);var $ofiltrate=$(".filtrate"),$ouser=$(".contain_left .personLayer_msg .user_name"),fid=$ofiltrate.attr("f-id"),tid=$ofiltrate.attr("date-id"),cid=$ofiltrate.attr("t-id"),$o=$(".faster_reply").find(".headportrait"),img=$o.html(),userid=$ouser.attr("u-id"),username=$ouser.html(),uid=$o.attr("u-id"),name=$o.attr("u-name"),link=$o.attr("href"),uvip=$o.attr("u-vip"),vips="";if(uvip==1){vips='<i class="vip_icon vip_icon_s"></i>'}function reasonfun(callback,obj){$.ajax({url:"/user/operationreason",type:"POST",dataType:"json",success:function(data){if(data.header.code==1e5){var arr=data.body,r="";for(var i=0,len=arr.length;i<len;i++){r+="<li>"+arr[i]+"</li>"}if(obj!="undefined"){callback(r,obj)}else{callback(r)}}else{removemodel(data.header.desc)}}})}$("body").delegate(".handlereason li","click",function(){var $oHandlereason=$(".handlereason");var val=$(this).html();$oHandlereason.siblings("textarea").val(val==langgobale[44].string?"":val);$oHandlereason.find("ul").hide()});$("body").delegate(".handlereason ul","mouseleave",function(){$(this).hide()});$("body").delegate(".bbsmodal","mouseleave",function(){$(".handlereason ul,.gradeselect ul").hide()});var removemodel=function(msg){var s1="<div class='modal_full in'>\n                    <div class='modal-backdrop'></div>\n                    <div class='modal'>\n                        <span class='close'></span>\n                        <h3>"+langgobale[150].string+"</h3>\n                    <div>",s2="</div>\n                </div>\n                </div>";$("body").append(s1+msg+s2);$(".modal_full").fadeIn("normal",function(){setTimeout(function(){$(".modal_full").fadeOut("fast",function(){$(this).remove()})},1e3)})};var submitPost=function(msg){$(".bbsmodal .submit").undelegate("click");$(".bbsmodal").remove();removemodel(msg)};var extendBtnClick=function(){$("body").delegate(".extendbtn","click",function(){$(this).siblings("ul").toggle()})};var labelClick=function(){$("body").delegate(".changetheme label","click",function(){if($(this).find('input[type="checkbox"]').length>0){var o=$(this).find('input[type="checkbox"]');o.prop("checked",o[0].checked?false:true)}if($(this).find('input[type="radio"]').length>0){var o=$(this).find('input[type="radio"]');o.prop("checked",o[0].checked?false:true);$(".changetheme").find(".day").hide();if($(this).siblings(".day").length>0){$(this).siblings(".day").show()}}});$("body").delegate(".changetheme input[type=checkbox], .changetheme input[type=radio]","click",function(){$(this).prop("checked",$(this)[0].checked?false:true)})};var changeRadio=function(){$("body").delegate(".selectwrap select","change",function(){$(".changetheme").show()})};var addModel=function(titlename,con){scoll=$(window).scrollTop();$(".bbsmodal").remove();var modal_s1="<div class='bbsmodal'><h4>"+titlename+"<span class='closebtn'></span></h4>";var modal_s2="</div>";$("body").append(modal_s1+con+modal_s2);$(".bbsmodal").show().css({top:"200px"})};var modelcon=function(classname,name,reason){var s='<div class="'+classname+'">';if(reason!=false){s+='<div class="handlereason">'+langgobale[45].string+'<span class="extendbtn">\n                            <i></i>\n                        </span>\n                    <ul>'+reason+'</ul>\n                </div> \n                <textarea></textarea>\n                <div class="bbsmodelfooter">\n                    <span class="btn submit">'+langgobale[46].string+'</span>\n                    <span class="txt">\n                        <span class="check_wrap noticauth"><i></i></span>'+langgobale[47].string+"</span>\n                </div>";addModel(name,s)}};var flotationstring="<div class='flotation'>\n                            <h4>"+langgobale[83].string+"<span class='themenum'>0</span>"+langgobale[78].string+"<span class='closebtn'></span>\n                                <span class='allcheck_txt'>"+langgobale[79].string+"</span>\n                                <input type='checkbox' name='allcheck' />\n                            </h4>\n                            <p>\n                                <span id='J_reply_warn'>"+langgobale[80].string+"</span>\n                                <span class='move_btn' id='J_reply_delete'>"+langgobale[159].string+"</span>\n                                <span class='shield' id='J_reply_shield'>"+langgobale[81].string+"</span>\n                                <span id='J_reply_stick'>"+langgobale[82].string+"</span>\n                            </p>\n                        </div>";if($(".reply_list").length>0){$(".reply_list").after(flotationstring);$(".flotation").css({width:"200px"}).find("p").css({margin:"20px 0 15px 18px"})}var flotationarr=new Array;$(".contain_right").on("click",".reply_list input",function(){var $oInput=$(".reply_list input"),$oFlotation=$(".flotation"),$oThemenum=$oFlotation.find(".themenum");$oFlotation.find(".allcheck_txt,input").show();var val=parseInt($oThemenum.html()),$oLi=$(this).parents("li"),post_id=$oLi.attr("post-id");if(!$(this)[0].checked){$(this).prop("checked",false);flotationarr.pop(post_id);val--}else{$(this).prop("checked",true);flotationarr.push(post_id);val++}$("[name = allcheck]:checkbox").prop("checked",$oInput.length==$oInput.filter(":checked").length?true:false);if(val==0){$oFlotation.css({top:0},function(){$oFlotation.hide()})}else{var topnum=$oLi.offset().top;topnum-=300;$oFlotation.show().css({top:topnum+100})}$oThemenum.html(val)});$(".contain_right").delegate(".flotation .closebtn","click",function(){var $oFlotation=$(".flotation"),$oInput=$(".reply_list input"),$oThemenum=$oFlotation.find(".themenum");$oInput.prop("checked",false);$oFlotation.hide();$oThemenum.html(0);flotationarr=[]});$("[name = allcheck]:checkbox").on("click",function(){var $oInput=$(".reply_list input"),$oFlotation=$(".flotation"),$oThemenum=$oFlotation.find(".themenum");$oInput.prop("checked",this.checked);var len=$oInput.length;if(len==$oInput.filter(":checked").length){$oThemenum.html(len);flotationarr=[];for(var i=0;i<len;i++){var a=$oInput.eq(i).parents("li").attr("post-id");flotationarr.push(a)}}else{$oFlotation.hide();$oThemenum.html(0);flotationarr=[]}});function delcallback(arr,msg){var $oInput=$(".reply_list input"),$oFlotation=$(".flotation"),$oThemenum=$oFlotation.find(".themenum");var $oitem=$(".reply_list li");var $oNum=$(".replay_num");var n=parseInt($oNum.html())-1;$oNum.html(n);if(arr.length==$oitem.length){$(".reply").remove()}else{for(var o=0,len=$oitem.length;o<len;o++){for(var i=0,l=arr.length;i<l;i++){if(arr[i]==$oitem.eq(o).attr("post-id")){$oitem.eq(o).remove()}}}}$oThemenum.html(0);$oFlotation.hide();removemodel(msg);flotationarr=[]}$(".contain_right").delegate("#J_reply_delete","click",function(){$.ajax({url:"/post/delete",data:{title_id:tid,post_id:flotationarr},type:"POST",dataType:"json",success:function(data){if(data.header.code==1e5){delcallback(flotationarr,data.header.desc)}else{removemodel(data.header.desc)}}})});$(".contain_right").delegate(".supervisebtn","click",function(){var $oInput=$(".reply_list input");var $oFlotation=$(".flotation"),$oThemenum=$oFlotation.find(".themenum");$oLi=$(this).parents("li");$oFlotation.find(".allcheck_txt,input").hide();$oThemenum.html("1");$oInput.prop("checked",false);$(this).parents("li").find("input").prop("checked",true);$oFlotation.show().css({top:$oLi.offset().top-200});post_id=$oLi.attr("post-id");flotationarr=[];flotationarr.push(post_id)});var modelDeletecomment=function(r){modelcon("modeldeletecomment",langgobale[85].string,r);$(".modeldeletecomment").prepend("<h5>"+langgobale[86].string+"?</h5>")};var deleteparentLi="";$("body").delegate(".remark .delete","click",function(){deleteparentLi=$(this).parents("li");reasonfun(modelDeletecomment)});$("body").delegate(".modeldeletecomment .submit","click",function(){var $odeletecomment=$(".modeldeletecomment");var reason=$odeletecomment.find("textarea").val();if(reason){$.ajax({url:"/comment/delete",data:{thread_id:tid,id:deleteparentLi.attr("data-value"),reason:reason,notify:$odeletecomment.find(".noticauth i").hasClass("check_center")?1:0},type:"POST",dataType:"json",success:function(data){if(data.header.code==1e5){if(deleteparentLi.siblings("li").length==0){$(".remark").remove()}else{deleteparentLi.remove()}submitPost(data.header.desc)}else{removemodel(data.header.desc)}}})}else{removemodel(langgobale[77].string)}});var deletereplyparentLi="";var modelreplyDeletecomment=function(reason){modelcon("modelreplydeletecomment",langgobale[85].string,reason);$(".modelreplydeletecomment").prepend("<h5>"+langgobale[86].string+"?</h5>")};$("body").delegate(".reply_talk .delete","click",function(){deletereplyparentLi=$(this).parents("li").eq(0);reasonfun(modelreplyDeletecomment)});$("body").delegate(".modelreplydeletecomment .submit","click",function(){var $odeletecomment=$(".modelreplydeletecomment");var reason=$odeletecomment.find("textarea").val();if(reason){$.ajax({url:"/comment/delete",data:{thread_id:tid,post_id:deletereplyparentLi.parents("li").attr("post-id"),id:deletereplyparentLi.attr("data-value"),reason:reason,notify:$odeletecomment.find(".noticauth i").hasClass("check_center")?1:0},type:"POST",dataType:"json",success:function(data){if(data.header.code==1e5){if(deletereplyparentLi.siblings("li").length==0){deletereplyparentLi.parents(".reply_talk").remove()}else{deletereplyparentLi.remove()}submitPost(data.header.desc)}else{removemodel(data.header.desc)}}})}else{removemodel(langgobale[77].string)}});var modelundoGrade=function(r){modelcon("modelundograde",langgobale[43].string,r);var $otr=$(".invitation_grade").html();var modelundograde=$(".modelundograde");modelundograde.prepend($otr);modelundograde.find("p").remove();modelundograde.find(".first").prepend('<input type="checkbox" name="checkgrade" />').eq(0).html("");modelundograde.find(".bbsmodelfooter").append('<label><input type="checkbox" name="allcheckgrade" />'+langgobale[79].string+"</label>")};$("body").delegate(".modelundograde label","click",function(e){var $oInput=$(".modelundograde").find("tr input");var allcheckbtn=$(this).find('input[name="allcheckgrade"]');$oInput.prop("checked",allcheckbtn[0].checked)});$("body").delegate(".modelundograde .submit","click",function(e){var $oundograde=$(".modelundograde");var reason=$oundograde.find("textarea").val();if(reason){var gradearr=[];var trinput=$(".modelundograde").find("tr input");for(var i=0,len=trinput.length;i<len;i++){if(trinput.eq(i)[0].checked){var obj={uid:trinput.eq(i).next().attr("u-id"),reason:trinput.eq(i).parent().siblings(".third").html(),gid:trinput.eq(i).parents("tr").attr("data-value")};gradearr.push(obj)}}if(gradearr.length>0){var data={thread_id:tid,gradearr:gradearr,reason:reason,notify:$oundograde.find(".noticauth i").hasClass("check_center")?1:0};$.ajax({url:"/rate/delete",data:data,type:"POST",dataType:"json",success:function(data){if(data.header.code==500005){var gradetr=$(".invitation_grade").find("tr");var l=gradetr.length,len=gradearr.length;if(l==len+1){$(".invitation_grade").remove()}else{for(var i=0;i<len;i++){for(var j=1;j<l;j++){if(gradetr.eq(j).attr("data-value")==gradearr[i].gid){gradetr.eq(j).remove()}}}var $span=$(".invitation_grade").find("tr").eq(0).find("span");$span.html(parseInt($span.html())-gradearr.length)}submitPost(data.header.desc)}else{removemodel(data.header.desc)}}})}else{removemodel(langgobale[58].string)}}else{removemodel(langgobale[59].string)}});$("body").delegate(".invitation_grade .revocation","click",function(e){reasonfun(modelundoGrade)});var replyundoGrade="";var modelreplyundoGrade=function(r,obj){replyundoGrade=obj.parents(".reply_grade");modelcon("modelreplyundograde",langgobale[43].string,r);var $otr=replyundoGrade.html();var modelundograde=$(".modelreplyundograde");modelundograde.prepend($otr);modelundograde.find("p").remove();modelundograde.find(".first").prepend('<input type="checkbox" name="checkgrade" />').eq(0).html("");modelundograde.find(".bbsmodelfooter").append('<label><input type="checkbox" name="allcheckgrade" />'+langgobale[79].string+"</label>")};$("body").delegate(".modelreplyundograde label","click",function(e){var $oInput=$(".modelreplyundograde").find("tr input");var allcheckbtn=$(this).find('input[name="allcheckgrade"]');$oInput.prop("checked",allcheckbtn[0].checked)});$("body").delegate(".modelreplyundograde .submit","click",function(e){var $oundograde=$(".modelreplyundograde");var reason=$oundograde.find("textarea").val();if(reason){var gradearr=[];var trinput=$(".modelreplyundograde").find("tr input");for(var i=0,len=trinput.length;i<len;i++){if(trinput.eq(i)[0].checked){var obj={uid:trinput.eq(i).next().attr("u-id"),reason:trinput.eq(i).parent().siblings(".third").html(),gid:trinput.eq(i).parents("tr").attr("data-value")};gradearr.push(obj)}}if(gradearr.length>0){var data={thread_id:tid,post_id:replyundoGrade.parents("li").attr("post-id"),gradearr:gradearr,reason:reason,notify:$oundograde.find(".noticauth i").hasClass("check_center")?1:0};$.ajax({url:"/rate/delete",data:data,type:"POST",dataType:"json",success:function(data){if(data.header.code==500005){var gradetr=replyundoGrade.find("tr");var l=gradetr.length,len=gradearr.length;if(l==len+1){replyundoGrade.remove()}else{for(var i=0;i<len;i++){for(var j=1;j<l;j++){if(gradetr.eq(j).attr("data-value")==gradearr[i].gid){gradetr.eq(j).remove()}}}var $span=gradetr.eq(0).find("span");$span.html(parseInt($span.html())-gradearr.length)}submitPost(data.header.desc)}else{removemodel(data.header.desc)}}})}else{removemodel(langgobale[58].string)}}else{removemodel(langgobale[59].string)}});$("body").delegate(".reply_grade .revocation","click",function(e){reasonfun(modelreplyundoGrade,$(this))});function arrslice(obj,arr,msg,obj_parent){for(var i=0,len=arr.length;i<len;i++){for(var j=0,l=obj.length;j<l;j++){if(obj.eq(j).html()==arr[i]){arr.splice(i,1)}}}for(var i=0,len=arr.length;i<len;i++){var s="<span>"+arr[i]+"</span>";obj_parent.append(s)}submitPost(msg)}var $oTagtextarea="";var modelTag=function(latelytag){var s='<div class="modeltag">';s+="<textarea></textarea><p>"+langgobale[89].string+":"+latelytag+"</p>";s+='<div class="bbsmodelfooter"><span class="btn submit">'+langgobale[49].string+"</span></div></div>";addModel(langgobale[88].string,s);$oTagtextarea=$(".modeltag").find("textarea")};$("body").delegate(".modeltag p span","click",function(){var value=$oTagtextarea.val();var s=$(this).html();if(value.indexOf(s)==-1){$oTagtextarea.val(value+$(this).html())}});$("body").delegate(".modeltag .submit","click",function(){var value=$oTagtextarea.val();if(value){var arr=value.split(/[\,,\，]/);var data={uid:uid,tid:tid,type:2,message:value};$.ajax({tag:"",url:"/tag/create",data:data,type:"POST",dataType:"json",success:function(data){if(data.header.code==8e5){if($(".invitationtag").length==0){$(".invitation_con").after('<p class="invitationtag"></p>')}var o=$(".invitationtag").find("span");arrslice(o,arr,data.header.desc,$(".invitationtag"))}else{removemodel(data.header.desc)}}})}else{removemodel(langgobale[90].string)}});var $UserTagotextarea="";var modelUserTag=function(){var s='<div class="modelusertag">';+"<textarea></textarea>";+'<div class="bbsmodelfooter">\n                            <span class="btn submit">'+langgobale[49].string+"</span>\n                        </div>\n                </div>";addModel(langgobale[91].string,s);$UserTagotextarea=$(".bbsmodal").find("textarea")};$("body").delegate(".modelusertag .submit","click",function(){var value=$UserTagotextarea.val();if(value){var arr=value.split(/[\,,\，]/);$.ajax({url:"/tag/create",data:{uid:uid,tag:"",message:value,type:4,tid:tid},type:"POST",dataType:"json",success:function(data){if(data.header.code==8e5){if($(".invitationtag").length==0){$(".invitation_con").after('<p class="invitationtag"></p>')}var o=$(".invitationtag").find("span");arrslice(o,arr,data.header.desc,$(".invitationtag"))}else{removemodel(data.header.desc)}}})}else{removemodel(langgobale[90].string)}});var modelClose=function(r,data){modelcon("modelclose",langgobale[92].string,r);$(".modelclose").prepend('<div class="day">'+langgobale[103].string+'<input type="text" readonly="readonly" xtype="day" size="15" class="datePicker"/>\n                                </div>\n                                <div class="changetheme">\n                                    <label>\n                                        <input type="radio" name="closeopen" data-name="open"/>'+langgobale[93].string+'</label>\n                                </div>\n                                <div class="changetheme">\n                                    <label>\n                                        <input type="radio" name="closeopen"  data-name="close"/>'+langgobale[94].string+"</label>\n                                </div>").find('input[name="closeopen"]').eq(data).prop("checked",true);$(".datePicker").datepicker()};$("body").delegate(".modelclose .submit","click",function(){var $oclose=$(".modelclose"),reason=$oclose.find("textarea").val();if(reason){var data={uid:uid,tid:tid,reason:reason,datelineclose:$oclose.find("input[xtype=day]").val(),op:[$oclose.find("input:radio:checked").attr("data-name")],notify:$oclose.find(".noticauth i").hasClass("check_center")?1:0};$.ajax({url:"/thread/manages",data:data,type:"POST",dataType:"json",success:function(data){if(data.header.code==500005){window.location.reload()}else{removemodel(data.header.desc)}}})}else{removemodel(langgobale[77].string)}});var modelDelete=function(r){modelcon("modeldelete",langgobale[159].string,r);$(".modeldelete").prepend("<h5>"+langgobale[163].string+"?</h5>")};$("body").delegate(".modeldelete .submit","click",function(){var reason=$(".bbsmodal").find("textarea").val();if(reason){var data={uid:uid,tid:tid,reason:reason,notice:$(".noticauth").find("i").hasClass("check_center")?1:0,isViolation:$(".violation").find("i").hasClass("check_center")?1:0};$.ajax({url:"/thread/delete",data:data,type:"POST",dataType:"json",success:function(data){if(data.header.code==500005){self.location=hosturl+"/forum/detail/fid/"+fid}else{removemodel(data.header.desc)}}})}else{removemodel(langgobale[77].string)}});$("body").delegate(".dropdown_text_middle",{click:function(event){$(this).children(".selectlist").toggle()},mouseleave:function(event){$(this).children(".selectlist").hide()}});$("body").delegate(".selectlist li","click",function(event){var s=$(this).html(),val=$(this).attr("data-value");$(this).parents(".dropdown_text_middle").children("span").html(s).attr("value",val)});$(".left_wrap .check_wrap,.bbsmodal .check_wrap").parent().on("click",function(){var $checkwrap_i=$(this).find("i"),$checkbox=$(this).children("input");if($checkwrap_i.hasClass("check_center")){$checkwrap_i.removeClass("check_center");$checkbox.attr("checked",false)}else{$checkwrap_i.addClass("check_center");$checkbox.attr("checked",true)}});$(".servepanel .btn").on("click",function(){if($(this).hasClass("btn-disabled")){return}var arr=[],checkWrap=$(".servepanel .check_wrap"),is_include=checkWrap.eq(0).find("i").hasClass("check_center")?1:0,is_public=checkWrap.eq(1).find("i").hasClass("check_center")?1:0,process_status=$(".process_status span").attr("value"),assign=$(".assign span").attr("value"),description=$(".servepanel textarea").val();$(".panelClassify").each(function(i){var panelClassifySpan=$(this).find("span"),o={};id=panelClassifySpan.attr("classifyId");o[id]=panelClassifySpan.attr("value");arr.push(o)});$.ajax({url:"/operatemanager/add",data:{forum_id:fid,thread_id:tid,is_include:is_include,is_public:is_public,process_status:process_status,assign:assign,description:description,type:arr},type:"POST",dataType:"json",success:function(data){if(data.header.code==1e5){$(".servepanel .btn").addClass("btn-disabled").html("已处理");removemodel("操作成功")}else{removemodel(data.header.desc)}}})});function changeBtn(){$(".servepanel .btn-disabled").removeClass("btn-disabled").html("提交")}$(".servepanel .check_wrap,.servepanel li").on("click",function(){changeBtn()});$(".servepanel .check_wrap").parent().on("click",function(){changeBtn()});$(".servepanel textarea").on("keydown",function(){changeBtn()});var nowtime=new Date,nowtimeYear=nowtime.getFullYear(),nowtimeMon=nowtime.getMonth()+1;var addModelMonth=function(titlename,con){$(".bbsmodal").remove();var modal_s1="<div class='bbsmodal exportmonth'><h4>"+titlename+"<span class='closebtn'></span></h4>";var modal_s2="</div>";$("body").append(modal_s1+con+modal_s2)};$(".servepanel .export").on("click",function(){var yearstr="",monthstr="";for(var i=nowtimeYear;i>=2011;i--){yearstr+="<li data-value='"+i+"'>"+i+"年</li>"}for(var j=1;j<=12;j++){if(nowtimeMon>=j){monthstr+="<li data-value='"+j+"'>"+j+"月</li>"}}addModelMonth("导出帖子","<div class='clearfix'>\n                                    <span class='title'>导出年份:</span>\n                                    <div class='dropdown_text_middle selectyear'>\n                                        <span value='"+nowtimeYear+"'>"+nowtimeYear+"年</span>\n                                        <i></i>\n                                        <ul class='selectlist'>"+yearstr+"</ul>\n                                    </div>\n                                </div>\n                                <div class='clearfix'>\n                                    <span class='title'>导出月份:</span>\n                                    <div class='dropdown_text_middle selectmonth'>\n                                        <span value='"+nowtimeMon+"'>"+nowtimeMon+" 月</span>\n                                        <i></i>\n                                        <ul class='selectlist'>"+monthstr+"</ul>\n                                    </div>\n                                </div>\n                                <span class='btn'>提交</span>")});$("body").delegate(".selectyear li","click",function(event){var n=$(".selectyear span").attr("value"),monthstr="";for(var j=1;j<=12;j++){if(n!=nowtimeYear){monthstr+="<li data-value='"+j+"'>"+j+"月</li>"}else{if(nowtimeMon>=j){monthstr+="<li data-value='"+j+"'>"+j+"月</li>"}}}$(".selectmonth ul").html(monthstr);$(".selectmonth span").attr("value","1").html("1月")});$("body").delegate(".exportmonth .btn","click",function(event){var year=$(".selectyear span").attr("value"),month=$(".selectmonth span").attr("value");var href="/operatemanager/export/forum_id/"+fid+"/year/"+year+"/month/"+month;window.open(href)});var modelMove=function(r,data){modelcon("modelmove",langgobale[92].string,r);var plateList="",plateval="",platename="";var classifystr="",classifyval="",classifyname="";for(var name in data.forum){if(name==fid){plateval=name;platename=data.forum[name]}plateList+='<li data-value="'+name+'">'+data.forum[name]+"</li>"}for(var name in data.type){if(name==cid){classifyval=name;classifyname=data.type[name]}classifystr+='<li data-value="'+name+'">'+data.type[name]+"</li>"}$(".modelmove").prepend('<div class="selectwrap clearfix">\n                                    <label>'+langgobale[99].string+'：</label>\n                                    <div class="dropdown_text_middle">\n                                        <span value="'+plateval+'">'+platename+'</span>\n                                        <i></i>\n                                        <ul class="selectlist">'+plateList+'</ul>\n                                    </div>\n                                </div>\n                                <div class="selectwrap clearfix">\n                                    <label>'+langgobale[98].string+'：</label>\n                                    <div class="dropdown_text_middle">\n                                        <span value="'+classifyval+'">'+classifyname+'</span>\n                                        <i></i>\n                                        <ul class="selectlist">'+classifystr+'</ul>\n                                    </div>\n                                </div>\n                                <div class="changetheme">\n                                    <label>\n                                        <input type="radio" name="moveto" data-value="0"/>'+langgobale[100].string+'</label>\n                                </div>\n                                <div class="changetheme">\n                                    <label>\n                                        <input type="radio" name="moveto" data-value="1"/>'+langgobale[101].string+"</label>\n                                </div>")};$("body").delegate(".modelmove .selectlist:eq(0) li","click",function(){var forum_id=$(this).attr("data-value");$.ajax({url:"/thread/topicManage",data:{fid:forum_id,op:["move"]},type:"POST",dataType:"json",success:function(data){if(data.header.code==500005){var val=data.body.type;var str="";if(val){if(val.length!=0){var n=0;for(var name in val){if(n++==0){$(".modelmove .dropdown_text_middle:eq(1) span").attr("value",name).html(val[name])}str+='<li data-value="'+name+'">'+val[name]+"</li>"}}else{str=langgobale[42].string}}else{$(".modelmove .dropdown_text_middle:eq(1) span").attr("value",0).html(langgobale[42].string);str=""}$(".modelmove").find(".selectlist").eq(1).html(str)}else{removemodel(data.header.desc)}}})});$("body").delegate(".modelmove .submit","click",function(){var $omove=$(".modelmove");var reason=$omove.find("textarea").val();if(!reason){removemodel(langgobale[77].string);return false}var $omoveselect=$omove.find(".dropdown_text_middle");var moveforum_id=$omoveselect.eq(0).find("span").attr("value");var movetypeid=$omoveselect.eq(1).find("span").attr("value");if(moveforum_id==0||movetypeid==0){removemodel(langgobale[102].string)}else{var data={tid:tid,op:["move"],reason:reason,fid:moveforum_id,typeid:movetypeid,notify:$omove.find(".noticauth i").hasClass("check_center")?1:0};$.ajax({url:"/thread/manages",data:data,type:"POST",dataType:"json",success:function(json){if(json.header.code==500005){window.location.href=hosturl+"/t-"+tid}else{removemodel(json.header.desc)}}})}});var modelFiseFall=function(r){modelcon("modelfisefall",langgobale[92].string,r);$(".modelfisefall").prepend('<div class="changetheme clearfix">\n                                        <label>\n                                            <input type="radio" name="fisefall" data-name="bump"/>'+langgobale[104].string+'</label>\n                                        <div class="day">'+langgobale[103].string+'<input type="text" xtype="day" readonly="readonly"  size="20" class="datePicker"/>\n                                        </div>\n                                    </div>\n                                    <div class="changetheme clearfix">\n                                        <label>\n                                            <input type="radio" name="fisefall" data-name="down"/>'+langgobale[105].string+"</label>\n                                    </div>").find('input[name="fisefall"]').eq(0).prop("checked",true);$(".datePicker").datepicker();$(".modelfisefall .day").show()};$("body").delegate(".modelfisefall .submit","click",function(){var $ofisefall=$(".modelfisefall");var reason=$ofisefall.find("textarea").val();var data={uid:uid,tid:tid,op:[$ofisefall.find("input:radio:checked").attr("data-name")],reason:reason,notify:$ofisefall.find(".noticauth i").hasClass("check_center")?1:0};if(data.op[0]=="bump"){data.datelinebump=$ofisefall.find('input[xtype="day"]').val()}$.ajax({url:"/thread/manages",data:data,type:"POST",dataType:"json",success:function(data){if(data.header.code==500005){submitPost(data.header.desc)}else{removemodel(data.header.desc)}}})});var modelLiveing=function(r){modelcon("modelliving",langgobale[92].string,r);$(".modelliving").prepend('<div class="changetheme">\n                                        <label>\n                                            <input type="radio" name="changetheme" name="opentheme" />'+langgobale[107].string+'</label>\n                                    </div>\n                                    <div class="changetheme">\n                                        <label>\n                                            <input type="radio" name="changetheme" name="closethem" />'+langgobale[108].string+"</label>\n                                    </div>\n                                    <p>"+langgobale[109].string+"</br>"+langgobale[110].string+"</br>"+langgobale[111].string+"</p>")};var initsrc="";var modelStamp=function(r,data){var optionstring='<li data-value="0" data-img="">'+langgobale[42].string+"</li>",jsondata={};for(var i=0,len=data.list.length;i<len;i++){if(data.sid>0){if(data.sid==data.list[i].stamp_id){initsrc=data.list[i].big_img;jsondata=data.list[i]}}optionstring+='<li data-value="'+data.list[i].stamp_id+'" data-img="'+data.list[i].big_img+'">'+data.list[i].name+"</li>"}modelcon("modelstamp",langgobale[92].string,r);$(".modelstamp").prepend('<div class="selectwrap clearfix">\n                                        <label>'+langgobale[112].string+'：</label>\n                                        <div class="dropdown_text_middle">\n                                            <span value="0" data-img="">'+langgobale[113].string+'</span>\n                                            <i></i>\n                                            <ul class="selectlist">'+optionstring+"</ul>\n                                        </div>\n                                    </div>");if(jsondata){$(".modelstamp .dropdown_text_middle span").attr("value",jsondata.stamp_id).attr("data-img",jsondata.big_img).html(jsondata.name)}$("body").delegate(".bbsmodal .closebtn","click",function(){var $ostampImg=$(".J_stamp");if(initsrc==""){$(".J_stamp").remove()}else{$ostampImg.find("img").attr("src",initsrc)}$(".bbsmodal").remove()})};$("body").delegate(".modelstamp li","click",function(){var imgsrc=$(this).attr("data-img");var $ostampImg=$(".J_stamp");if($ostampImg.length>0){if(imgsrc==""){$ostampImg.remove()}else{$ostampImg.find("img").attr("src",imgsrc)}}else{if(imgsrc!=""){$(".invitation_con").prepend('<div class="J_stamp"><img src="'+imgsrc+'"/></div>')}}});$("body").delegate(".modelstamp .submit","click",function(){var $ostamp=$(".modelstamp");var reason=$ostamp.find("textarea").val();var $option=$ostamp.find("span");var data={uid:uid,tid:tid,sid:$option.attr("value")};if(data.sid>0){data.stamp_id=$option.attr("value")}data.reason=reason;data.notify=$ostamp.find(".noticauth i").hasClass("check_center")?1:0;$.ajax({url:"/stamp/Revoke",data:data,type:"POST",dataType:"json",success:function(data){if(data.header.code==500005){submitPost(data.header.desc)}else{removemodel(data.header.desc)}}})});var modelClassify=function(r,data){var option="",namestr="";for(var name in data){if(name==cid){namestr=data[name]}option+='<li data-value="'+name+'">'+data[name]+"</li>"}modelcon("modelclassify",langgobale[92].string,r);$(".modelclassify").prepend('<div class="selectwrap clearfix">\n                                        <label>'+langgobale[114].string+':</label>\n                                        <div class="dropdown_text_middle selectgenre">\n                                            <span value="'+cid+'">'+namestr+'</span>\n                                            <i></i>\n                                            <ul class="selectlist">'+option+"</ul>\n                                        </div>\n                                    </div>\n                                    </div>")};$("body").delegate(".modelclassify .submit","click",function(){var $oclassify=$(".modelclassify");var $oclassifyOption=$oclassify.find("span");var data={uid:uid,tid:tid,op:["classify"],reason:$oclassify.find("textarea").val(),typeid:$oclassifyOption.attr("value"),notify:$oclassify.find(".noticauth i").hasClass("check_center")?1:0};$.ajax({url:"/thread/manages",data:data,type:"POST",dataType:"json",success:function(data){if(data.header.code==500005){window.location.href=hosturl+"/t-"+tid;
}else{removemodel(data.header.desc)}}})});var modelCopy=function(r){modelcon("modelcopy",langgobale[92].string,r);$(".modelcopy").prepend('<div class="selectwrap"><label>目标版块：</label><select><option>版主已经</option><option>版主已经</option><option>版主已经</option><option>版主已经</option></select></div><div class="selectwrap"><label>目标版块：</label><select><option>版主已经</option><option>版主已经</option><option>版主已经</option><option>版主已经</option></select></div>')};var modelWarning=function(r,data){var s="";if(data!=0){s="<p>"+langgobale[115].string+username+langgobale[116].string+data.count+langgobale[117].string+"</p>"}modelcon("modelwarning",langgobale[92].string,r);$(".modelwarning").prepend('<div class="changetheme">\n                                        <label>\n                                            <input type="radio" name="warning"  data-value="0" />'+langgobale[80].string+'</label>\n                                    </div>\n                                    <div class="changetheme">\n                                        <label>\n                                            <input type="radio"  name="warning"  data-value="1"/>'+langgobale[118].string+"</label>\n                                    </div>"+s).find("input").eq(data.status).prop("checked",true)};$("body").delegate(".modelwarning .submit","click",function(){var $owarn=$(".modelwarning");var reason=$owarn.find("textarea").val();if(!reason){removemodel(langgobale[77].string);return false}var $owarnRadio=$owarn.find('input[name="warning"]:checked');if($owarnRadio.length>0){var data={uid:uid,tid:tid,reason:reason,op:["warn"],warntype:$owarnRadio.attr("data-value"),notify:$owarn.find(".noticauth i").hasClass("check_center")?1:0};$.ajax({url:"/thread/manages",data:data,type:"POST",dataType:"json",success:function(data){if(data.header.code==500005){submitPost(data.header.desc)}else{removemodel(data.header.desc)}}})}else{removemodel(langgobale[119].string)}});var replyclose=function(top){$("body").delegate(".bbsmodal .closebtn","click",function(){$(".bbsmodal").remove();$(".flotation").show().css({top:top})})};var modelreplyWarning=function(r){var flotationtop=parseInt($(".flotation").css("top"));$(".flotation").hide();modelcon("modelreplywarning",langgobale[92].string,r);$(".modelreplywarning").prepend('<div class="changetheme">\n                                            <label>\n                                                <input type="radio" name="warning"  data-value="0" />'+langgobale[80].string+'</label>\n                                        </div>\n                                        <div class="changetheme">\n                                            <label>\n                                                <input type="radio"  name="warning"  data-value="1"/>'+langgobale[118].string+"</label>\n                                        </div>");replyclose(flotationtop)};$(".contain_right").delegate("#J_reply_warn","click",function(){reasonfun(modelreplyWarning)});$("body").delegate(".modelreplywarning .submit","click",function(){var $owarn=$(".modelreplywarning");var reason=$owarn.find("textarea").val();if(!reason){removemodel(langgobale[77].string);return false}var $owarnRadio=$owarn.find("input:checked");if($owarnRadio.length>0){var arr=[];var item=$(".reply_list").find("input:checked");for(var i=0,len=item.length;i<len;i++){var parent=item.eq(i).parents("li");var o={pid:parent.attr("post-id"),uid:parent.attr("u-id")};arr.push(o)}var data={tid:tid,reason:reason,warnarr:arr,warntype:$owarnRadio.attr("data-value"),notify:$owarn.find(".noticauth i").hasClass("check_center")?1:0};$.ajax({url:"/post/warn",data:data,type:"POST",dataType:"json",success:function(data){if(data.header.code==1e5){window.location.reload()}else{removemodel(data.header.desc)}}})}else{removemodel(langgobale[119].string)}});var modelShield=function(r,data){var s="";if(data!=0){s="<p>"+langgobale[115].string+username+langgobale[120].string+data.count+langgobale[117].string+"</p>"}modelcon("modelshield",langgobale[92].string,r);$(".modelshield").prepend('<div class="changetheme">\n                                        <label>\n                                            <input type="radio" name="shield" data-value="0"/>'+langgobale[81].string+'</label>\n                                    </div>\n                                    <div class="changetheme">\n                                        <label>\n                                            <input type="radio" name="shield" data-value="1"/>'+langgobale[118].string+"</label>\n                                    </div>"+s).find("input").eq(data.status).prop("checked",true)};$("body").delegate(".modelshield .submit","click",function(){var $oshield=$(".modelshield");var reason=$oshield.find("textarea").val();if(!reason){removemodel(langgobale[77].string);return false}var $oshieldRadio=$oshield.find('input[name="shield"]:checked');if($oshieldRadio.length>0){var data={uid:userid,tid:tid,reason:reason,op:["banpost"],shieldtype:$oshieldRadio.attr("data-value"),notify:$oshield.find(".noticauth i").hasClass("check_center")?1:0};$.ajax({url:"/thread/manages",data:data,type:"POST",dataType:"json",success:function(data){if(data.header.code==500005){window.location.reload()}else{removemodel(data.header.desc)}}})}else{removemodel(langgobale[121].string)}});var modelreplyShield=function(r){var flotationtop=parseInt($(".flotation").css("top"));$(".flotation").hide();modelcon("modelreplyShield",langgobale[92].string,r);$(".modelreplyShield").prepend('<div class="changetheme">\n                                            <label>\n                                                <input type="radio" name="shield" data-value="0"/>'+langgobale[81].string+'</label>\n                                        </div>\n                                        <div class="changetheme">\n                                            <label>\n                                                <input type="radio" name="shield" data-value="1"/>'+langgobale[118].string+"</label>\n                                        </div>");replyclose(flotationtop)};$(".contain_right").delegate("#J_reply_shield","click",function(){reasonfun(modelreplyShield)});$("body").delegate(".modelreplyShield .submit","click",function(){var $oshield=$(".modelreplyShield");var reason=$oshield.find("textarea").val();if(!reason){removemodel(langgobale[77].string);return false}var $oshieldRadio=$oshield.find("input:checked");if($oshieldRadio.length>0){var arr=[];var item=$(".reply_list").find("input:checked");for(var i=0,len=item.length;i<len;i++){var parent=item.eq(i).parents("li");var o={pid:parent.attr("post-id"),uid:parent.attr("u-id")};arr.push(o)}var data={tid:tid,reason:reason,shieldarr:arr,shieldtype:$oshieldRadio.attr("data-value"),notify:$oshield.find(".noticauth i").hasClass("check_center")?1:0};$.ajax({url:"/post/ban",data:data,type:"POST",dataType:"json",success:function(data){if(data.header.code==1e5){window.location.reload()}else{removemodel(data.header.desc)}}})}else{removemodel(langgobale[121].string)}});var modelreplystick=function(r){var flotationtop=parseInt($(".flotation").css("top"));$(".flotation").hide();modelcon("modelreplystick",langgobale[92].string,r);$(".modelreplystick").prepend('<div class="changetheme">\n                                            <label>\n                                                <input type="radio" name="stick"  data-value="0" />'+langgobale[123].string+'</label>\n                                        </div>\n                                        <div class="changetheme">\n                                            <label>\n                                                <input type="radio"  name="stick"  data-value="1"/>'+langgobale[122].string+"</label>\n                                        </div>");replyclose(flotationtop)};$(".contain_right").delegate("#J_reply_stick","click",function(){reasonfun(modelreplystick)});$("body").delegate(".modelreplystick .submit","click",function(){var $ostick=$(".modelreplystick");var reason=$ostick.find("textarea").val();if(!reason){removemodel(langgobale[77].string);return false}var $ostickRadio=$ostick.find("input:checked");if($ostickRadio.length>0){var arr=[];var item=$(".reply_list").find("input:checked");for(var i=0,len=item.length;i<len;i++){var parent=item.eq(i).parents("li");var o={pid:parent.attr("post-id"),"float":parent.attr("float-id"),uid:parent.attr("u-id")};arr.push(o)}var data={tid:tid,reason:reason,shieldarr:arr,sticktype:$ostickRadio.attr("data-value"),notify:$ostick.find(".noticauth i").hasClass("check_center")?1:0};$.ajax({url:"/post/top",data:data,type:"POST",dataType:"json",success:function(data){if(data.header.code==1e5){window.location.reload()}else{removemodel(data.header.desc)}}})}else{removemodel(langgobale[124].string)}});var modelClean=function(r){modelcon("modelclean",langgobale[92].string,r);$(".modelclean").prepend('<div class="changetheme">\n                                    <label>\n                                        <input type="checkbox" name="clean"  data-value="0"/>'+langgobale[126].string+'</label>\n                                </div>\n                                <div class="changetheme">\n                                    <label>\n                                        <input type="checkbox" name="clean" data-value="0"/>'+langgobale[125].string+"</label>\n                                </div>")};$("body").delegate(".modelclean label","click",function(){var child=$(this).find("input");var value=child.attr("data-value");child.attr("data-value",value==0?1:0)});$("body").delegate(".modelclean .submit","click",function(){var $oclean=$(".modelclean");var reason=$oclean.find("textarea").val();if(!reason){removemodel(langgobale[77].string);return false}var $ocleanInput=$oclean.find('input:checkbox[name="clean"]'),clean_head=$ocleanInput.eq(0).attr("data-value"),clean_signature=$ocleanInput.eq(1).attr("data-value");if(clean_head==1||clean_signature==1){var data={uid:uid,tid:tid,reason:reason,op:["clean"],avatar:clean_head,sign:clean_signature,notify:$oclean.find(".noticauth i").hasClass("check_center")?1:0};$.ajax({url:"/thread/manages",data:data,type:"POST",dataType:"json",success:function(data){if(data.header.code==500005){submitPost(data.header.desc)}else{removemodel(data.header.desc)}}})}else{removemodel(langgobale[127].string)}});var tip="";var modelIp=function(data){tip=data.ip;var s='<div class="modelip">';s+=data.ip+"    "+data.country,s+='<a href="javascript:void(0)" class="banip">'+langgobale[128].string+"</a>";addModel("IP",s)};$("body").delegate(".modelip .banip","click",function(){$.ajax({url:"/ipBan/add",data:{uid:uid,ip:tip},type:"POST",dataType:"json",success:function(data){if(data.header.code==1e5){submitPost(data.header.desc)}else{removemodel(data.header.desc)}}})});var modelBan=function(r,data){if(data.allowbanuser!=1&&data.allowbanvisituser!=1){removemodel(langgobale[234].string);return false}modelcon("modelban",langgobale[92].string,r);var str="";if(data.allowbanuser==1){str+='<div class="changetheme clearfix">\n                        <label>\n                            <input type="radio" name="ban"  data-value="0" />'+langgobale[203].string+"</label>\n                    </div>"}if(data.allowbanvisituser==1){str+='<div class="changetheme clearfix">\n                        <label>\n                            <input type="radio"  name="ban"  data-value="1"/>'+langgobale[204].string+"</label>\n                    </div>"}var t=data.period;var t_str='<li data-value="0">'+langgobale[229].string+"</li>";if(t!=null){t_str="";for(i=0,l=t.length;i<l;i++){var n=0,j=0;var d=t[i];switch(d){case 0:n=langgobale[228].string,j=5;break;case 3:n=langgobale[229].string,j=0;break;case 7:n=langgobale[230].string,j=1;break;case 30:n=langgobale[231].string,j=2;break;case 90:n=langgobale[232].string,j=3;break;case 365:n=langgobale[233].string,j=4;break}t_str+='<li data-value="'+j+'">'+n+"</li>"}}str+='<div class="changetheme clearfix">'+'<label><input type="checkbox" name="cleanalldata" data-value="1"/>清除数据</label>'+"</div>";str+='<div class="changetheme clearfix">\n                    <span class="timelabel">'+langgobale[103].string+'</span>\n                    <div class="dropdown_text_middle">\n                        <span value="0">'+langgobale[229].string+'</span>\n                        <i></i>\n                        <ul class="selectlist">'+t_str+"</ul>\n                    </div>\n                </div>";$(".modelban").prepend(str).find('input[type="radio"]').eq(0).prop("checked",true)};$("body").delegate(".modelban .submit","click",function(){var $oban=$(".modelban");var reason=$oban.find("textarea").val();if(!reason){removemodel(langgobale[77].string);return false}var $obanRadio=$oban.find('input[name="ban"]:checked');var data={miid:$(".personLayer .user_msg a").attr("u-id"),reason:reason,bantype:$obanRadio.attr("data-value")==0?4:5,cleanalldata:$oban.find('input[name="cleanalldata"]:checked').length,notify:$oban.find(".noticauth i").hasClass("check_center")?1:0};var index=$oban.find(".dropdown_text_middle span").attr("value");var nowtime=(new Date).getTime();switch(index){case"0":data.groupexpire=nowtime+3*86400;break;case"1":data.groupexpire=nowtime+7*86400;break;case"2":data.groupexpire=nowtime+30*86400;break;case"3":data.groupexpire=nowtime+90*86400;break;case"4":data.groupexpire=nowtime+365*86400;break;case"5":data.groupexpire=0;break}$.ajax({url:"/user/manager",data:data,type:"POST",dataType:"json",success:function(data){if(data.header.code==1e5){submitPost(langgobale[235].string)}else{removemodel(data.header.desc)}}})});var modelCombine=function(r){modelcon("modelcombine","选择了1篇帖子",r);$(".modelcombine").prepend("<p>"+langgobale[130].string+"  &larr;  "+langgobale[131].string+' ID (tid)</p><input type="text"/>')};var modelDivision=function(r){modelcon("modeldivision",langgobale[92].string,r);$(".modeldivision").prepend("<p>"+langgobale[165].string+'</p>\n            <input type="text"/>\n            <p>'+langgobale[132].string+" &rarr; "+langgobale[133].string+" ("+langgobale[134].string+' "," '+langgobale[135].string+')\n            </p>\n            <textarea class="partition"></textarea>')};var reg=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;String.prototype.colorHex=function(){var that=this;if(/^(rgb|RGB)/.test(that)){var aColor=that.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(",");var strHex="#";for(var i=0;i<aColor.length;i++){var hex=Number(aColor[i]).toString(16);if(hex==="0"){hex+=hex}strHex+=hex}if(strHex.length!==7){strHex=that}return strHex}else if(reg.test(that)){var aNum=that.replace(/#/,"").split("");if(aNum.length===6){return that}else if(aNum.length===3){var numHex="#";for(var i=0;i<aNum.length;i+=1){numHex+=aNum[i]+aNum[i]}return numHex}}else{return that}};var bbsObj="";var modelStick=function(r,data){modelcon("modelstick",langgobale[92].string,r);var group=data.group;var sticks="",digest="";var stickRights=data.stickRights,digestRights=data.digestRights;if(stickRights!=0){var fenleistick='<li data-value="1">'+langgobale[136].string+"</li>";var platestick='<li data-value="2">'+langgobale[137].string+"</li>";var globalstick=group!=3?'<li data-value="3">'+langgobale[138].string+"</li>":"";var initstick="";switch(data.stick){case"1":initstick=langgobale[136].string;break;case"2":initstick=langgobale[137].string;break;case"3":initstick=langgobale[138].string;break;default:initstick=langgobale[42].string;break}var stickStyleArray=[];stickStyleArray[1]="纯标题式";stickStyleArray[2]="大图式";stickStyleArray[3]="右侧单图式";var initStickStyle="";if(!data.stickStyle){data.stickStyle=0}switch(parseInt(data.stickStyle)){case 1:case 2:case 3:initStickStyle=stickStyleArray[parseInt(data.stickStyle)];break;default:initStickStyle=langgobale[42].string;break}if(stickRights==1){platestick=globalstick=""}if(stickRights==2){globalstick=""}var hasCoverpath=data.cover_path=="";var imgpic=hasCoverpath?"":'<img id="imghead" src="'+data.cover_path+'">',btnsrc=hasCoverpath?"":'<span class="btn btn-dark J-cancelStickImg">删除</span>',btnName=hasCoverpath?"上传":"更改图片";sticks='<div class="changetheme clearfix">'+'<div class="clearfix stickWrap">'+'<label><input type="checkbox" name="box" />'+langgobale[82].string+"</label>"+'<div class="dropdown_text_middle">'+'<span value="'+data.stick+'">'+initstick+"</span>"+"<i></i>"+'<ul class="selectlist clearfix">'+'<li data-value="0">'+langgobale[42].string+"</li>"+platestick+fenleistick+globalstick+"</ul>"+"</div>"+'<div class="day">'+langgobale[103].string+'<input readonly="readonly" type="text" xtype="day" size="15" class="datePicker"/>'+"</div>"+"</div>"+'<div class="clearfix stickStyleWrap">'+'<label><input type="checkbox" style="visibility: hidden;" />样式</label>'+'<div class="dropdown_text_middle">'+'<span value="'+data.stickStyle+'">'+initStickStyle+"</span>"+"<i></i>"+'<ul class="selectlist clearfix">'+'<li data-value="1">'+stickStyleArray[1]+"</li>"+'<li data-value="2">'+stickStyleArray[2]+"</li>"+'<li data-value="3">'+stickStyleArray[3]+"</li>"+"</ul>"+"</div>"+"</div>"+'<div class="stickpic">'+"<label>"+langgobale[242].string+"</label>"+'<div class="pic">'+'<div id="preview">'+imgpic+"</div>"+'<input type="button" id="stickImg" name="stickImg" value="'+btnName+'" class="btn" onclick="selectStickImg(this)">'+btnsrc+"</div>"+"</div>"+"</div>"+"</div>"}if(digestRights!=0){var classify1='<li data-value="1">'+langgobale[140].string+"</li>",classify2='<li data-value="2">'+langgobale[141].string+"</li>",classify3=group!=3?'<li data-value="3">'+langgobale[142].string+"</li>":"";var initdigest="";switch(data.digest){case"1":initdigest=langgobale[140].string;break;case"2":initdigest=langgobale[141].string;break;case"3":initdigest=langgobale[142].string;break;default:initdigest=langgobale[118].string;break}if(digestRights==1){classify3=classify2=""}if(digestRights==2){classify3=""}digest='<div class="changetheme digestwrap clearfix">'+'<div class="clearfix">'+'<label><input type="checkbox" name="box" />'+langgobale[139].string+"</label>"+'<div class="dropdown_text_middle">'+'<span value="'+data.digest+'">'+initdigest+"</span>"+"<i></i>"+'<ul class="selectlist clearfix">'+'<li data-value="0">'+langgobale[118].string+"</li>"+classify1+classify2+classify3+"</ul>"+"</div>"+'<div class="day">'+langgobale[103].string+'<input type="text" readonly="readonly" xtype="day" size="15" class="datePicker"/></div>'+"</div>"+"</div>"}var $omodelstick=$(".modelstick");var colorArr=["#6ea930","#f57c00","#ef5350","#488eee","#9575cd","#a67c52","#444"],colorString="";for(var i=0,len=colorArr.length;i<len;i++){colorString+="<span>"+colorArr[i]+"</span>"}$omodelstick.prepend(sticks+digest+'<div class="changetheme bumpwrap clearfix">'+'<div class="clearfix">'+'<label><input type="checkbox" name="box" />'+langgobale[144].string+"</label>"+'<div class="day">'+langgobale[103].string+'<input type="text" xtype="day" readonly="readonly" size="15" class="datePicker"/>'+"</div>"+"</div>"+"</div>"+'<div class="changetheme highlightwrap clearfix">'+'<label><input type="checkbox" name="box" />'+langgobale[143].string+"</label>"+'<div class="bg">'+"<span></span>"+'<div class="color_wrap">'+colorString+"</div>"+"</div>"+'<span class="bold modify" data-value="0">B</span>'+'<span class="italic modify" data-value="0">I</span>'+'<span class="underline modify" data-value="0">U</span>'+'<div class="day">'+langgobale[103].string+'<input type="text" xtype="day" readonly="readonly" size="15" class="datePicker"/>'+"</div>"+"</div>"+"</div>");$(".datePicker").datepicker();var oSpan=$(".modelstick .color_wrap").find("span");for(var i=0,len=oSpan.length;i<len;i++){oSpan.eq(i).css({background:oSpan.eq(i).html()})}var $omodelstickBg=$omodelstick.find(".bg");$omodelstickBg.eq(1).find("span").eq(0).css({background:data.highlight.highlight_bgcolor});$omodelstickBg.eq(0).find("span").eq(0).css({background:data.highlight.highlight_color});var $omodify=$omodelstick.find(".modify");for(var i=0,len=$omodify.length;i<len;i++){var style=data.highlight.highlight_style[i];$omodify.eq(i).attr("data-value",style);if(style==1){$omodify.eq(i).addClass("current")}}var n=bbsObj[0].className;var num="";switch(n){case"stick":num=0;break;case"essence":num=1;break;case"提升":num=2;break;case"highlight":num=3;break}var stickImgCallback=function(argument){$(".uploadmgiframe").next().remove();$(".uploadmgiframe").remove();var frameName="upload_frame_"+0;var iframe=$('<iframe style="position:absolute;top:-9999px" class="uploadmgiframe"/>').attr("name",frameName);var form=$('<form method="post" style="display:none;" enctype="multipart/form-data" />').attr("name","form_"+frameName);form.attr("target",frameName).attr("action","/thread/manages");var formHtml1="",src="";if($("#imghead").length==1){src=$("#imghead").attr("src")}formHtml1='<input type="file" data-value="img" name="stickImg" value="'+src+'">';form.append(formHtml1);iframe.appendTo("body");form.appendTo("body");iframe.load(function(){var contents=$(this).contents().get(0);var data=$(contents).find("body").text();data=window.eval("("+data+")");if(data.header.code==500005){submitPost(data.header.desc)}else{removemodel(data.header.desc)}})};var stickImgClick=function(argument){$("body").delegate("#imghead","click",function(){var s=$(this).attr("src");window.open(s,"_blank")})};$('.modelstick label input[name="box"]').eq(num).click();stickImgCallback();stickImgClick();$("body").delegate(".J-cancelStickImg","click",function(){$("#stickImg").attr("value","上传");$("#imghead,.J-cancelStickImg").remove();$(".uploadmgiframe").next().html('<input type="text" name="delStickImg" value="1">')});$("body").delegate(".modelstick label","click",function(){var o=$(this).parents(".changetheme").find(".day");if(o.hasClass("acvite")){o.removeClass("acvite")}else{o.addClass("acvite")}});$("body").delegate(".modify","click",function(){var value=$(this).attr("data-value");if(value==0){$(this).addClass("current")}else{$(this).removeClass("current")}$(this).attr("data-value",value=="0"?1:0)});$("body").delegate(".color_wrap span","click",function(){$(this).parent().siblings("span").css({background:$(this).html()})});$("body").delegate(".modelstick .bg","click",function(){$(this).find(".color_wrap").toggle()});$("body").delegate(".modelstick .submit","click",function(){var $ostick=$(".modelstick");var reason=$ostick.find("textarea").val();if($ostick.find("input:checkbox:checked").length>0){var data={uid:uid,tid:tid,op:[],reason:reason,notify:$ostick.find(".noticauth i").hasClass("check_center")?1:0};var oStick=$(".stickWrap");var oStickStyle=$(".stickStyleWrap");if(oStick.length==1){if(oStick.find("input").eq(0)[0].checked){data.op.push("stick");data.sticklevel=oStick.find("span").attr("value");data.datelinestick=oStick.find('input[xtype="day"]').val();data.stickStyle=oStickStyle.find("span").attr("value")}}var oDigest=$(".digestwrap");if(oDigest.length==1){if(oDigest.find("input").eq(0)[0].checked){data.op.push("digest");data.digestlevel=oDigest.find("span").attr("value");data.datelinedigest=oDigest.find('input[xtype="day"]').val()}}var oBump=$(".bumpwrap");if(oBump.length==1){if(oBump.find("input").eq(0)[0].checked){data.op.push("bump");data.datelinebump=oBump.find('input[xtype="day"]').val()}}var oHighlight=$(".highlightwrap");if(oHighlight.length==1){if(oHighlight.find("input").eq(0)[0].checked){data.op.push("highlight");highlight_color=oHighlight.find(".bg").eq(0).find("span").eq(0).css("background-color");data.highlight_color=highlight_color.colorHex();data.highlight_style=new Array;var $omodify=$ostick.find(".modify");for(var i=0;i<$omodify.length;i++){data.highlight_style[i]=$omodify.eq(i).attr("data-value")}data.datelinehighlight=oHighlight.find('input[xtype="day"]').val()}}var formHtml="";if($('input[name="delStickImg"]').length==1){formHtml+='<input type="text" name="delStickImg" value="1">'}$(".uploadmgiframe").next().find('input[type="text"]').remove();$.each(data,function(index,content){formHtml+='<input type="text" name="'+index+'" value="'+content+'">'});$(".uploadmgiframe").next().append(formHtml);$(".uploadmgiframe").next().submit()}else{removemodel(langgobale[106].string)}})};var selectStickImg=function(flag){$(".uploadmgiframe").next().remove();$(".uploadmgiframe").remove();$("#stickImg").attr("value","更改图片");if($(".J-cancelStickImg").length==0){$("#stickImg").after('<span class="btn btn-dark J-cancelStickImg">删除</span>')}else{$('input[name="delStickImg"]').remove()}$.upload({url:"/thread/manages",fileName:"stickImg",params:"",clickfun:true,dataType:"json",type:"POST",flag:flag,success:function(data){if(data.header.code==500005){submitPost(data.header.desc)}else{removemodel(data.header.desc)}}})};var modelRecommend=function(r,data){modelcon("modelrecommend",langgobale[92].string,r);var group=data.group;var recommend="";var recommendRight=parseInt(data.recommendRight);if(recommendRight!==0){var recommendStyleArray=[];recommendStyleArray[1]="纯标题式";recommendStyleArray[2]="大图式";recommendStyleArray[3]="右侧单图式";var initRecommendStyle="";if(!data.recommendStyle){data.recommendStyle=0}switch(parseInt(data.recommendStyle)){case 1:case 2:case 3:initRecommendStyle=recommendStyleArray[parseInt(data.recommendStyle)];break;default:initRecommendStyle=langgobale[42].string;break}var hasCover=data.recommendCover==="";var imgpic=hasCover?"":'<img id="imghead" src="'+data.cover_path+'">',btnsrc=hasCover?"":'<span class="btn btn-dark J-cancelRecommendImg">删除</span>',btnName=hasCover?"上传":"更改图片";recommend='<div class="changetheme clearfix">'+'<div class="clearfix">'+"<label>"+'<input type="radio" name="recommend" checked/>'+langgobale[241].string+"</label>"+'<div class="day">'+langgobale[103].string+'<input type="text" xtype="day" readonly="readonly"  size="20" class="datePicker"/>'+"</div>"+"</div>"+'<div class="clearfix recommendStyleWrap">'+'<label><input type="checkbox" style="visibility: hidden;" />样式</label>'+'<div class="dropdown_text_middle">'+'<span value="'+data.recommendStyle+'">'+initRecommendStyle+"</span>"+"<i></i>"+'<ul class="selectlist clearfix">'+'<li data-value="1">'+recommendStyleArray[1]+"</li>"+'<li data-value="2">'+recommendStyleArray[2]+"</li>"+'<li data-value="3">'+recommendStyleArray[3]+"</li>"+"</ul>"+"</div>"+"</div>"+'<div class="recommendpic">'+"<label>"+langgobale[242].string+"</label>"+'<div class="pic">'+'<div id="preview">'+imgpic+"</div>"+'<input type="button" id="recommendImg" name="recommendImg" value="'+btnName+'" class="btn" onclick="selectRecommendImg(this)">'+btnsrc+"</div>"+"</div>"+"</div>"}var $oModelRecommend=$(".modelrecommend");$oModelRecommend.prepend(recommend);$(".datePicker").datepicker();$oModelRecommend.find(".day").addClass("active");var recommendImgCallback=function(argument){$(".uploadmgiframe").next().remove();$(".uploadmgiframe").remove();var frameName="upload_frame_"+0;var iframe=$('<iframe style="position:absolute;top:-9999px" class="uploadmgiframe"/>').attr("name",frameName);var form=$('<form method="post" style="display:none;" enctype="multipart/form-data" />').attr("name","form_"+frameName);form.attr("target",frameName).attr("action","/manage/recommend");var formHtml1,src="";if($("#imghead").length==1){src=$("#imghead").attr("src")}formHtml1='<input type="file" data-value="img" name="recommendImg" value="'+src+'">';form.append(formHtml1);iframe.appendTo("body");form.appendTo("body");iframe.load(function(){var contents=$(this).contents().get(0);var data=$(contents).find("body").text();data=window.eval("("+data+")");if(data.header.code==500005){submitPost(data.header.desc)}else{removemodel(data.header.desc)}})};var recommendImgClick=function(argument){$("body").delegate("#imghead","click",function(){var s=$(this).attr("src");window.open(s,"_blank")})};recommendImgCallback();recommendImgClick();$("body").delegate(".J-cancelRecommendImg","click",function(){$("#recommendImg").attr("value","上传");$("#imghead,.J-cancelRecommendImg").remove();$(".uploadmgiframe").next().html('<input type="text" name="delRecommendImg" value="1">')});$("body").delegate(".modelrecommend .submit","click",function(){var $orecommend=$(".modelrecommend");var reason=$orecommend.find("textarea").val();var dateline=$orecommend.find('input[xtype="day"]').val();if(!dateline){removemodel(langgobale[96].string);return}var data={tid:tid,reason:reason,notify:$orecommend.find(".noticauth i").hasClass("check_center")?1:0,dateline:dateline};var oRecommendStyle=$(".recommendStyleWrap");data.recommendStyle=oRecommendStyle.find("span").attr("value");var formHtml="";if($('input[name="delRecommendImg"]').length==1){formHtml+='<input type="text" name="delRecommendImg" value="1">'}$(".uploadmgiframe").next().find('input[type="text"]').remove();$.each(data,function(index,content){formHtml+='<input type="text" name="'+index+'" value="'+content+'">'});$(".uploadmgiframe").next().append(formHtml);$(".uploadmgiframe").next().submit()})};var selectRecommendImg=function(flag){$(".uploadmgiframe").next().remove();$(".uploadmgiframe").remove();$("#recommendImg").attr("value","更改图片");if($(".J-cancelRecommendImg").length==0){$("#recommendImg").after('<span class="btn btn-dark J-cancelRecommendImg">删除</span>')}else{$('input[name="delRecommendImg"]').remove()}$.upload({url:"/manage/recommend",fileName:"recommendImg",params:"",clickfun:true,dataType:"json",type:"POST",flag:flag,success:function(data){if(data.header.code==500005){submitPost(data.header.desc)}else{removemodel(data.header.desc)}}})};var ajaxFun=function(json,modelName,num){$.ajax({url:"/thread/topicManage",data:json,type:"POST",dataType:"json",success:function(data){if(data.header.code==500005){var d=data.body;if(num==9){modelName(d);return}switch(num){case 1:d=d.close;break;case 3:d=d.stamp;break;case 4:d=d.type;break;case 5:d=d.warn;break;case 6:d=d.banpost;break}reasonfun(modelName,d)}else{if(num==1){submitPost(langgobale[148].string)}else{removemodel(data.header.desc)}}}})};var init=function(){extendBtnClick();labelClick();changeRadio();var $o=$(".supervise");$o.find(".delete").on("click",function(){reasonfun(modelDelete)});$o.find(".tag").on("click",function(){var s='<span data-value="'+2+'">'+langgobale[146].string+',</span><span data-value="'+2+'">'+langgobale[147].string+",</span>";modelTag(s)});$o.find(".supclose").on("click",function(){ajaxFun({op:["close"],tid:tid},modelClose,1)});$o.find(".move").on("click",function(){ajaxFun({fid:fid,tid:tid,op:["move"]},modelMove,2)});$o.find(".risefall").on("click",function(){reasonfun(modelFiseFall)});$o.find(".liveing").on("click",function(){reasonfun(modelLiveing)});$o.find(".stamp").on("click",function(){ajaxFun({tid:tid,op:["stamp"]},modelStamp,3)});$o.find(".classify").on("click",function(){ajaxFun({op:["classify"],fid:fid},modelClassify,4)});$o.find(".copy").on("click",function(){reasonfun(modelCopy)});$o.find(".warning").on("click",function(){ajaxFun({op:["warn"],tid:tid,uid:userid},modelWarning,5)});$o.find(".shield").on("click",function(){ajaxFun({op:["banpost"],tid:tid},modelShield,6)});$o.find(".clean").on("click",function(){reasonfun(modelClean)});$o.find(".ip").on("click",function(){ajaxFun({op:["ip"],tid:tid},modelIp,9)});$o.find(".combine").on("click",function(){reasonfun(modelCombine)});$o.find(".division").on("click",function(){reasonfun(modelDivision)});$o.find(".stick,.highlight,.essence").on("click",function(){bbsObj=$(this);ajaxFun({op:["stick","highlight","bump","digest"],tid:tid},modelStick,7)});$o.find(".ban").on("click",function(){ajaxFun({op:["banUser"],tid:tid,uid:userid},modelBan,8)});$o.find(".recommend").on("click",function(){bbsObj=$(this);ajaxFun({tid:tid},modelRecommend,7)})};init();$("body").delegate(".bbsmodal h4","mousedown",function(event){mouseMove($(this).parent(),221,40,25,event)});