webpackJsonp([3],{1:function(e,t,i){"use strict";(function(t){function n(e){var t=Math.floor((new Date).getTime()/1e3),i=new Date;i.setHours(0),i.setMinutes(0),i.setSeconds(0),i=Math.floor(i.getTime()/1e3);var n=new Date(1e3*e);return t-e<=50?"刚刚":t-e<3600?Math.ceil((t-e)/60)+"分钟前":t-e<86400?n.getDate()!=(new Date).getDate()?"昨天":Math.ceil((t-e)/3600)+"小时前":n.getFullYear()!=(new Date).getFullYear()?n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate():n.getMonth()+1+"-"+n.getDate()}function o(e){if(e){for(var t=/(<a[^<]*>.*?<\/a>)/,i=e.split(t),n=0,o=i.length;n<o;++n)t.test(i[n])?i[n]=i[n].replace(/(<a\s)/,function(e){return e+'target="_blank" '}):(i[n]=i[n].replace(/av[0-9]+/gi,function(e){return"<a class='video-link' target='_blank' href='//www.bilibili.com/video/"+e+"'>"+e.toUpperCase()+"</a>"}),i[n]=i[n].replace(/cv[0-9]+/gi,function(e){return"<a class='article-link' target='_blank' href='//www.bilibili.com/read/"+e+"?from=articleDetail'>"+e.toUpperCase()+"</a>"}));return i.join("")}}function a(e){t(e).find("*[contenteditable]").removeAttr("contenteditable")}function r(e,t,i,n,o){if(t=Math.round(parseInt(t)),i=Math.round(parseInt(i)),e){var a=e.match(/(.*\.(jpg|jpeg|gif|png))(\?.*)?/);if(a){var r=-1!==e.indexOf("/bfs/");if("gif"===a[2]||!r)return e;var l=n&&o?"_"+n+"e_"+o+"c":"",c=t&&i?"@"+t+"w_"+i+"h"+l:"@",s=a[3]?a[3]:"";return R?a[1]+c+".webp"+s:a[1]+c+"."+a[2]+s}}}function l(e){return e?e.replace(/^http:/,""):""}function c(e,t){if(e){var i=e.getBoundingClientRect(),n=t||0;return i.top<window.innerHeight+n&&i.bottom>=0}}function s(e){var t={};try{t=JSON.parse(e)}catch(e){}return t}function d(e){return e?e.replace(/<img src[^>]+>/g,function(e){return e.replace(/src=/,"data-src=")}):""}function u(e){if(-1!=String(e).indexOf(":"))return e;var t,i;return e/60<1?(t="0",i=e):(t=Math.floor(e/60),i=e-60*Math.floor(e/60)),t<10&&(t="0"+t),i<10&&(i="0"+i),t+":"+i}function f(){var e=2;return void 0!==window.screen.systemXDPI&&void 0!==window.screen.logicalXDPI&&window.screen.systemXDPI>window.screen.logicalXDPI?e=window.screen.systemXDPI/window.screen.logicalXDPI:void 0!==window.devicePixelRatio&&(e=window.devicePixelRatio),e}function h(e){var t=Math.floor((new Date).getTime()/1e3),i=new Date;i.setHours(0),i.setMinutes(0),i.setSeconds(0),i=Math.floor(i.getTime()/1e3);var n=new Date(1e3*e);if(t-e<=60)return"刚刚";if(t-e<3600)return parseInt((t-e)/60)+"分钟前";if(t-e<86400)return parseInt((t-e)/3600)+"小时前";var o=new Date;return o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.getTime()/1e3-e<86400?"昨天":n.getFullYear()!=(new Date).getFullYear()?n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate():n.getMonth()+1+"-"+n.getDate()}function m(e,t,i,n){var o=null,a=void 0;return function(){var r=n||this,l=arguments,c=+new Date;clearTimeout(o),a||(a=c),c-a>=i?(e.apply(r,l),a=c):o=setTimeout(function(){e.apply(r,l)},t)}}function g(e){for(var t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],i="",n=0;n<e;n++){i+=t[Math.floor(62*Math.random())]}return i}function w(e){return e&&e.replace(/(<\/figure>)((<p><br\/?><\/p>)+)(<figure[^>]*>)/g,function(e,t,i,n,o){return t+o})}function v(e,i,n){if(0!=t(e).length&&i){var o=t(e).offset();o.width=t(e).width(),o.height=t(e).height();var a=t('<div class="messageBox">'+i+"</div>");a.appendTo("body");var r={height:a.outerHeight(),width:a.outerWidth()},l={top:o.top-r.height-20,left:o.left-(r.width-o.width)/2,opacity:1};l.left+r.width>window.innerWidth&&(l.left="initial",l.right="0"),l.top<t(window).scrollTop()&&(l.top=o.top+o.height+20),l.left<0&&(l.left=0),t(a).css(l),setTimeout(function(){a.css("opacity","0"),a.on("transitionend",function(){a.remove()})},n||3e3)}}function p(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;if(0!=t(e).length&&i&&!t(e).hasClass("left-toasting")){t(e).addClass("left-toasting");var o=t(e).offset();o.width=t(e).width(),o.height=t(e).height();var a=t('<div class="message-box-holder"><div class="left-messageBox">'+i+'<span class="arrow"></span></div>');a.appendTo("body");var r={height:a.outerHeight(),width:a.outerWidth()},l={left:o.left-r.width-20};l.left+r.width>window.innerWidth&&(l.left="initial",l.right="0"),l.left<0&&(l.left=0,a.width()+20>o.left&&a.css("margin-right",window.innerWidth-o.left+20)),l.top=o.top-(a.outerHeight()-o.height)/2,t(a).css(l),a.find(".left-messageBox").addClass("on"),setTimeout(function(){a.find(".left-messageBox").css("opacity","0"),a.find(".left-messageBox").on("transitionend",function(){a.remove(),t(e).removeClass("left-toasting")})},n)}}function b(e){Y.mobile?window.location.href="//passport.bilibili.com/login":window.biliQuickLogin?window.biliQuickLogin(e):t.getScript("//static.hdslb.com/account/bili_quick_login.js",function(){window.biliQuickLogin(e)})}function k(e){var t=parseInt(e);return t<0?"-":t<1e4?t:t>=1e4&&t<1e7?(Math.round(e/1e3)/10).toFixed(1)+"万":t>=1e7&&t<1e8?Math.floor(e/1e4)+"万":t>=1e8?(e/1e8).toFixed(1)+"亿":"-"}function _(e){var i=t(['<div class="page-mask"></div>','<div class="modalBox">',"<p>"+(e.message||"")+"</p>",'<button class="cancel">取消</button>','<button class="sure">确定</button>',"</div>"].join(""));i.find(".cancel").click(function(){i.remove()}),i.find(".sure").click(function(){i.remove(),e.sure()}),i.appendTo("body")}function y(e){var i=e.callback||"_jsonpCallback_"+(new Date).getTime(),n=t('<iframe name="frm'+i+'" id="frm'+i+'" style="visibility:hidden; width:1px; height:1px"></iframe>').appendTo("body"),o=t('<form action="'+e.url+'" method="POST" target="frm'+i+'"></form>').appendTo("body");void 0===e.data&&(e.data={}),e.data.csrf=H.get("bili_jct"),e.data[e.jsonpCallback||"callback"]=i;for(var a in e.data)t('<input type="hidden" name="'+a+'" />').appendTo(o).val(e.data[a]);window[i]=function(t){"function"==typeof e.success&&e.success(t),"function"==typeof e.complete&&e.complete(t),n.remove(),o.remove()},o.submit()}function x(e){var i=t(['<div class="center-toast">','<div class="info">'+e+"</div>","</div>"].join(""));t("body").append(i),setTimeout(function(){i.one("transitionend",function(){i.remove()}).css("opacity","0")},3e3)}function C(e){var t=0;if(document.selection){var i=document.selection.createRange();e.focus(),i.moveStart("character",-e.value.length),t=i.text.length}else(e.selectionStart||"0"==e.selectionStart)&&(t=e.selectionStart);return t}function D(e){return e=e.toString(),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/"/g,"&#34;"),e=e.replace(/'/g,"&#39;"),e=e.replace(/\\/g,"&#92;"),e=e.replace(/\//g,"&#47;"),e=e.replace(/\n/g,"")}function M(){var e=void 0,t=void 0,i=void 0,n=void 0;if(window.getSelection)t=window.getSelection();else if(window.document.getSelection)t=window.document.getSelection();else if(window.document.selection)return t=window.document.selection,{html:t.createRange().htmlText,selection:t};return t.rangeCount>0&&(i=t.getRangeAt(0),n=window.document.createElement("div"),n.appendChild(i.cloneContents()),e=n.innerHTML),{html:e||"",selection:t}}function T(){var e=new Date,t=e.getMonth()+1,i=e.getDate(),n=e.getHours(),o=e.getMinutes();return e.getFullYear()+"-"+(t<10?"0"+t:t)+"-"+(i<10?"0"+i:i)+" "+(n<10?"0"+n:n)+":"+(o<10?"0"+o:o)}function j(){var e=null;window.getSelection?e=window.getSelection():document.selection&&(e=document.selection),e&&(e.empty&&e.empty(),e.removeAllRanges&&e.removeAllRanges())}function S(){/Android|iPhone|Windows Phone/.test(navigator.userAgent)?/cv[0-9]+/.test(location.href)&&(location.href=location.href.replace(/read\/(cv)/,"read/mobile/")):/mobile\/[0-9]+/.test(location.href)&&(location.href=location.href.replace(/read\/(mobile\/)/,"read/cv"))}function P(e){function t(e){if(i[e.keyCode])return O(e),!1}var i={37:1,38:1,39:1,40:1};"lock"==e?(window.addEventListener&&window.addEventListener("DOMMouseScroll",O,!1),window.onwheel=O,window.onmousewheel=document.onmousewheel=O,window.ontouchmove=O,document.onkeydown=t):"unlock"==e&&(window.removeEventListener&&window.removeEventListener("DOMMouseScroll",O,!1),window.onmousewheel=document.onmousewheel=null,window.onwheel=null,window.ontouchmove=null,document.onkeydown=null)}function O(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1}function I(e){return F[e]||"/read/home"}i(2);var R=function(){try{return 0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")}catch(e){return!1}}(),H={get:function(e){var t=""+document.cookie,i=t.indexOf(e+"=");if(-1==i||""==e)return"";var n=t.indexOf(";",i);return-1==n&&(n=t.length),unescape(t.substring(i+e.length+1,n))},set:function(e,t,i){i=void 0!==i?i:365;var n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3),document.cookie=e+"="+escape(t)+";expires="+n.toGMTString()+"; path=/; domain=.bilibili.com"},delete:function(e){this.set(e,"",-1)}},N=/AppleWebKit.*Mobile.*/i.test(window.navigator.userAgent),Y=function(){var e=navigator.userAgent;return{trident:/Trident/i.test(e),presto:/Presto/i.test(e),webKit:/AppleWebKit/i.test(e),gecko:/Gecko/i.test(e)&&!/KHTML/i.test(e),mobile:/AppleWebKit.*Mobile.*/i.test(e),ios:/\(i[^;]+;( U;)? CPU.+Mac OS X/i.test(e),android:/Android/i.test(e)||/Linux/i.test(e),windowsphone:/Windows Phone/i.test(e),iPhone:/iPhone/i.test(e),iPad:/iPad/i.test(e),MicroMessenger:/MicroMessenger/i.test(e),webApp:!/Safari/i.test(e),edge:/edge/i.test(e),weibo:/Weibo/i.test(e),uc:/UCBrowser/i.test(e),qq:/MQQBrowser/i.test(e),baidu:/Baidu/i.test(e)}}();window.leftToast=p;var A={list:[],emit:function(e,t){if(this.list[e]){var i=this.list[e];for(var n in i)i[n](t)}},on:function(e,t){this.list[e]?this.list[e].push(t):this.list[e]=[t]}},F={"/read/home":0,"/read/douga":2,"/read/game":1,"/read/lightnovel":16,"/read/technology":17,"/read/other":3,0:"/read/home",2:"/read/douga",1:"/read/game",16:"/read/lightnovel",17:"/read/technology",3:"/read/other"};e.exports={countdown:n,replaceLink:o,formatImg:r,trimHttp:l,checkInView:c,getObjFromStr:s,processImgSrc:d,formatDuration:u,DPR:2,getDevicePixelRatio:f,human_date:h,cookie:H,throttle:m,GetRandomString:g,removeEmptyTagP:w,version:Y,toast:v,leftToast:p,login:b,isMobile:N,formatNum:k,modalBox:_,postJSON:y,centerToast:x,getCursortPosition:C,bus:A,filterChar:D,webp:R,getSelectObj:M,getDateStr:T,clearSelection:j,checkUA:S,lockPageScroll:P,filterContentEdit:a,checkCategoriesMap:I}}).call(t,i(0))},13:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={list:[],emit:function(e,t){if(this.list[e]){var i=this.list[e];for(var n in i)try{i[n](t)}catch(e){}}},on:function(e,t){"function"==typeof t&&(this.list[e]?this.list[e].push(t):this.list[e]=[t])}};t.default=n},2:function(e,t){},30:function(e,t,i){"use strict";(function(e){function n(t){o.cookie.get("DedeUserID")&&e.ajax({type:"GET",url:"//api.bilibili.com/x/article/is_author",data:{jsonp:"jsonp"},xhrFields:{withCredentials:!0}}).done(function(e){if(0==e.code&&e.data.is_author){var i=t.find(".link");t.find(".ac-link").attr("href","http://member.bilibili.com/v/#/text-edit"),i.find(".title").text("专栏投稿"),i.find(".info").text("前去写文章")}})}Object.defineProperty(t,"__esModule",{value:!0});var o=i(1);t.default=n}).call(t,i(0))},78:function(e,t,i){"use strict";(function(e){function t(e){return e&&e.__esModule?e:{default:e}}i(79);var n=i(80),o=t(n),a=i(81),r=t(a),l=i(82),c=t(l),s=i(83),d=t(s),u=i(84),f=t(u),h=i(85),m=t(h),g=i(86),w=t(g),v=i(30),p=t(v);i(87),i(88);var b=i(13),k=t(b);e(document).ready(function(){if(window.original&&window.original.rid&&new r.default(e(".carousel")),(0,f.default)(e(".search-module")),(0,m.default)(e(".up-list")),(0,o.default)(e(".nav-tab-bar")),(0,d.default)(e(".article-list")),(0,c.default)(e(".categories-bar")),(0,w.default)(e(".rank-module")),(0,p.default)(e(".more")),0==window.original.rid){var t=(new Date).getTime(),i=e(".right-side").offset().top+e(".right-side").height(),n=!1,a=e(".right-side"),l=e(".right-side .up-list");k.default.on("right.grow",function(){i=e(".right-side").offset().top+e(".right-side").height()}),e(document).scroll(function(){(new Date).getTime()-t>50&&(t=(new Date).getTime(),window.scrollY>=i&&!n?(n=!0,a.addClass("scroll"),l.hide()):window.scrollY<i&&n&&(n=!1,a.removeClass("scroll"),l.show()))})}else e(".right-side").css("position","fixed"),e(document).on("scroll.rightSide",function(){window.scrollY>42?e(".right-side").addClass("scroll"):e(".right-side").removeClass("scroll")});e(document).on("scroll.leftNavSide",function(){window.scrollY>42?e(".nav-tab-bar").addClass("scroll"):e(".nav-tab-bar").removeClass("scroll")})})}).call(t,i(0))},79:function(e,t){},80:function(e,t,i){"use strict";(function(e){function n(t){a.default.on("change.tag",function(i){var n=e(t).find("a:eq(0)").attr("href"),o=n.match(/\?(.+)/)?n.match(/\?(.+)/)[1]:"",a="";a=o?/\?*from=/.test(o)?o.replace(/from=([^&]+)/,""+i):o+"&from=category_"+i:"from=category_"+i,e(t).find("a1").each(function(t,i){var n=e(i),o=n.attr("href");o=/\?/.test(o)?n.attr("href").replace(/(\?.+)/,"?"+a):n.attr("href")+"?"+a,n.attr("href",o)})})}Object.defineProperty(t,"__esModule",{value:!0});var o=i(13),a=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=n}).call(t,i(0))},81:function(e,t,i){"use strict";(function(e){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function t(n){i(this,t);var o=e(n);0!=o.length&&(this.holder=o,this.items=o.find(".carousel-item"),this.itemNum=this.items.length,this.tap=o.find(".carousel-list"),this.tap.css("width",this.itemNum+"00%"),this.index=0,this.indicator=o.find(".indicator"),this.titles=o.find(".titles"),this.initReport(),this.rolling(),this.initIndicator())}return n(t,[{key:"rolling",value:function(){var e=this;this.items.eq(this.index%this.itemNum).trigger("carousel-show");var t=-this.index%this.itemNum*(1/this.itemNum)*100+"%",i={transform:"translateX("+t+")","-webkit-transform":"translateX("+t+")"};this.tap.css(i),this.timer=setTimeout(function(){e.rolling()},4e3),this.indicator.find(".indicator-btn").removeClass("on"),this.indicator.find(".indicator-btn[data-indicator-index="+this.index%this.itemNum+"]").addClass("on"),this.titles.find("a").removeClass("on"),this.titles.find("a[data-title-index="+this.index%this.itemNum+"]").addClass("on"),this.index++}},{key:"initIndicator",value:function(){var t=this;this.indicator.find(".indicator-btn").on("click",function(i){var n=e(i.currentTarget);if(!n.hasClass("on")){var o=n.attr("data-indicator-index");t.index=o,clearTimeout(t.timer),t.rolling()}})}},{key:"initReport",value:function(){var t=e(this.holder).offset().top,i=e(this.holder).height();this.items.each(function(n,o){e(o).on("carousel-show",function(){var a=[window.scrollY,window.innerHeight+window.scrollY,t,t+o.offsetHeight];a=a.sort(function(e,t){return e>t}),a[3]-a[0]-window.innerHeight<=i/2&&(window.reportMsgObj.read_banner_show=n+1,e(o).off("carousel-show"))}),e(o).on("click",function(){window.reportMsgObj.read_banner_click=n+1})})}}]),t}();t.default=o}).call(t,i(0))},82:function(e,t,i){"use strict";(function(e){function n(t){r=t;var i=location.hash.match(/rid=([0-9]+)/)&&location.hash.match(/rid=([0-9]+)/)[1]||window.original&&window.original.rid;r.find("[data-tag-id="+i+"]").addClass("on"),r.on("click",".tag-item",function(t){var i=e(t.currentTarget);if(!i.hasClass("on")){i.siblings(".on").removeClass("on"),i.addClass("on");var n=i.attr("data-tag-id");n?/rid=[0-9]+/.test(location.hash)?location.hash=location.hash.replace(/rid=([0-9]+)/,"rid="+n):location.hash?location.hash+="&rid="+n:location.hash="rid="+n:location.hash=location.hash.replace(/rid=[0-9]+/,""),a.default.emit("querychange.tag",n)}}),window.addEventListener("hashchange",function(){var e=location.hash.match(/rid=([0-9]+)/);e=e&&e[1],r.find(".on").removeClass("on"),r.find("[data-tag-id="+e+"]").addClass("on"),a.default.emit("querychange.tag",e)})}Object.defineProperty(t,"__esModule",{value:!0});var o=i(13),a=function(e){return e&&e.__esModule?e:{default:e}}(o),r=void 0,l=null;a.default.on("querychange.tag",function(e){l!=e&&(null!=e&&void 0!=e||(e=window.original.rid),l=e,a.default.emit("change.tag",e))}),t.default=n}).call(t,i(0))},83:function(e,t,i){"use strict";(function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(t){v=t.find(".article-list-holder"),p=t.find(".tips-holder"),(e("body").height()<=window.innerHeight||0==g.length)&&(h=1,a()),e(document).on("scroll.addArticle",function(){u||window.scrollY+2*window.innerHeight>document.getElementsByTagName("body")[0].offsetHeight&&(u=!0,window.original&&0!=window.original.rid?window.reportMsgObj.read_home_list_load=!0:window.reportMsgObj.read_category_list_load=!0,a())}),e(".partitio-name .filter ").click(function(t){e(t.currentTarget).find(".filter-btn-lst").show(),t.stopPropagation()}),e(document).on("click",function(){e(".partitio-name .filter .filter-btn-lst").hide()}),e(".partitio-name .filter .filter-btn").click(function(i){i.stopPropagation(),e(".partitio-name .filter label").text(e(i.currentTarget).text()),e(".partitio-name .filter .filter-btn-lst").hide(),t=e(i.currentTarget),b!=t.attr("btn-tp")&&(w=[],h=1,b=t.attr("btn-tp"),v.html(""),a())}),v.on("click",".article-item .article-info-bar .like",function(t){var i=e(t.currentTarget);window.reportMsgObj.read_ListLike_click=!0;var n=i.parents(".article-item").attr("data-id1"),o=!1,a=i.text();i.hasClass("liked")?(o=!0,a--):a++,a=a>=0?a:0,o?i.removeClass("liked"):i.addClass("liked"),i.text(a),e.ajax({url:"//api.bilibili.com/x/article/like",data:{id:n,type:o?2:1,jsonp:"jsonp",csrf:c.cookie.get("bili_jct")},type:"post",xhrFields:{withCredentials:!0}}).done(function(e){0!=e.code&&((0,c.toast)(i,e.message),"-101"==e.code&&(0,c.login)(),o?(a++,i.addClass("liked")):(a--,i.removeClass("liked")),a=a>=0?a:0,i.text(a))}),t.stopPropagation()}),v.on("click",".article-item",function(t){var i=e(t.currentTarget),n=i.attr("data-id1");window.open("//www.bilibili.com/read/cv"+n+"?from=category_"+f)}),v.on("click",".article-item .article-info-bar .reply",function(){window.reportMsgObj.read_ListReply_click=!0}),v.on("click",".article-item a",function(e){e.stopPropagation()}),e(p).on("click",".error .reload",function(){p.html('<div class="loading"><div class="icon-loading"></div>loading...</div>'),a()}),d.default.emit("querychange.tag",f)}function a(){p.html('<div class="loading"><div class="icon-loading"></div>loading...</div>'),e.ajax({url:"//api.bilibili.com/x/article/recommends",data:{cid:f,pn:h,ps:m,jsonp:"jsonp",aids:w.join(","),sort:b},xhrFields:{withCredentials:!0}}).done(function(t){if(0==t.code&&t.data&&t.data.length){h++;var i=t.data;u=!1,w.length>=60&&(w=w.slice(w.length-60,w.length));for(var n in i){var o=i[n];w.push(o.id),v.append(new k(o).holder)}e("body").height()<=window.innerHeight&&a()}else 0==e(v).find(".error,.tips").length&&(0==t.code?p.html('<div class="tips"><div class="no-more"></div></div>'):p.html('<div class="error"><div class="icon-fail"></div>加载失败 <span class="reload">请点击重试</span></div>'))}).fail(function(){0==p.find(".error").length&&p.html('<div class="error"><div class="icon-fail"></div>加载失败 <span class="reload">请点击重试</span></div>')})}function r(e){return _[e]||"/read/home"}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),c=i(1),s=i(13),d=function(e){return e&&e.__esModule?e:{default:e}}(s),u=!1,f=location.hash.match(/rid=([0-9]+)/)&&location.hash.match(/rid=([0-9]+)/)[1]||window.original&&window.original.rid,h=2,m=20,g=window.articleIdList,w=g,v=void 0,p=void 0,b=0;d.default.on("change.tag",function(e){e!=f&&(w=[],v.html(""),h=1,f=e,a())});var k=function(){function t(e){n(this,t),this.render(e),this.coverImg}return l(t,[{key:"render",value:function(t){this.holder=e(this._renderArtCard(t)),this.coverImg=this.holder.find(".cover-image")}},{key:"_renderArtCard",value:function(t){var i=this,n=(0,c.formatImg)(t.image_urls[0],234*(0,c.getDevicePixelRatio)(),176*(0,c.getDevicePixelRatio)());return e('<img src="'+n+'">').on("load",function(){i.coverImg.css("background-image","url("+n+")").addClass("loaded")}),['<div class="article-item item-tp-'+t.template_id+'" data-id1='+t.id+">",'<div class="item-holder">','<div class="article-content">','<div class="article-left-block">','<a href="//www.bilibili.com/read/cv'+t.id+"?from=category_"+f+'" target="_blank" class="article-title-holder"><span class="article-title'+(t.list?" in-list":"")+'" title="'+(0,c.filterChar)(t.title)+'">'+(0,c.filterChar)(t.title)+"</span>"+(t.list?'<span class="list-mark">来自文集</span>':"")+"</a>",'<div class="article-desc">'+(0,c.filterChar)(t.summary)+"</div>",'<div class="article-info-bar">','<a href="//space.bilibili.com/'+t.author.mid+'#!/" target="_blank" class="up-content">','<span class="face-holder">','<img src="'+((0,c.trimHttp)((0,c.formatImg)(t.author.face,24*(0,c.getDevicePixelRatio)(),24*(0,c.getDevicePixelRatio)()))||"//static.hdslb.com/images/member/noface.gif")+'" class="face-img">',"</span>",'<span class="nick-name">'+t.author.name+"</span>","</a>",'<a href="//www.bilibili.com'+r(t.categories[0].id)+"#rid="+t.categories[1].id+'" target="_self"><span class="category">'+t.category.name+"</span></a>",'<span class="view">'+(0,c.formatNum)(t.stats.view)+"</span>",'<span class="like '+(1==t.like?"liked":"")+'">'+(0,c.formatNum)(t.stats.like)+"</span>",'<a href="//www.bilibili.com/read/cv'+t.id+"#comment&from=category_"+f+'" target="_blank"><span class="reply">'+(0,c.formatNum)(t.stats.reply)+"</span></a>","</div>","</div>",'<div class="cover-img">','<a href="//www.bilibili.com/read/cv'+t.id+"?from=category_"+f+'" target="_blank">','<div class="cover-image" pre-style=\'background-image:url('+n+")'></div>","</a>","</div>","</div>","</div>","</div>"].join("")}}]),t}(),_={"/read/home":0,"/read/douga":2,"/read/game":1,"/read/lightnovel":16,"/read/technology":17,"/read/other":3,0:"/read/home",2:"/read/douga",1:"/read/game",16:"/read/lightnovel",17:"/read/technology",3:"/read/other"};t.default=o}).call(t,i(0))},84:function(e,t,i){"use strict";(function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(t){var i=e(t),n=i.find("input"),o="",u=new h(function(){if(o!=n.val()){if(""==(o=n.val()))return void a(m,c());m.show(),e.getJSON("//s.search.bilibili.com/main/suggest?jsoncallback=?",{func:"suggest",suggest_type:"accurate",sub_type:"tag",main_ver:"v1",highlight:"",userid:f.cookie.get("DedeUserID")||0,bangumi_acc_num:1,special_acc_num:1,topic_acc_num:1,upuser_acc_num:3,tag_num:10,special_num:10,bangumi_num:10,upuser_num:3,term:n.val(),rnd:Math.random()}).then(function(e){r(m,e.result&&e.result.tag)})}},1e3),m=i.find(".search-word-panel"),g=!1;n.on("compositionstart",function(){g=!0}),n.on("compositionend",function(){u.fire(),g=!1}),n.on("keydown",function(e){"13"==e.keyCode&&l(n.val())}),n.on("keyup",function(){g||u.fire()}),n.on("focus",function(t){m.show(),e(t.currentTarget).val()?u.fire():a(m,c())}).on("focusout",function(){}),t.on("click.search",".search-block .search-icon",function(){o?(l(o),s(o)):window.open("//search.bilibili.com")}),t.on("click",".search-word-panel li a",function(t){var i=e(t.currentTarget).text();l(i),s(i)}),t.on("click",".search-word-panel li .cancel",function(t){d(e(t.currentTarget).siblings("a").text()),a(m,c())}),t.on("click",function(e){e.stopPropagation()}),e(document).on("click",function(){m.hide()})}function a(e,t){if(t&&0==t.length)return void e.hide();e.find(".panel-title span").text("历史搜索"),e.find(".suggest-item,.history-item").remove();var i="";for(var n in t){i+='<li class="history-item"><a class="content">'+t[n].value+'</a><div class="cancel"></div></li>'}e.append(i)}function r(e,t){if(t&&0==t.length||!t)return void e.hide();e.find(".panel-title span").text("关键词"),e.find(".suggest-item,.history-item").remove();var i="";for(var n in t){i+='<li class="suggest-item"><a class="content">'+t[n].name+'</a><div class="cancel"></div></li>'}e.append(i)}function l(e){window.open("//search.bilibili.com/article?keyword="+encodeURI(e)+"&from_source=article"),s(e)}function c(){return JSON.parse(localStorage.getItem("search_history"))||[]}function s(e){var t=c();for(var i in t){var n=t[i];if(e==n.value)return n.timestamp=(new Date).getTime(),t.sort(function(e,t){return e.timestamp<t.timestamp}),void localStorage.setItem("search_history",JSON.stringify(t))}t.length>=10&&t.pop(),t.unshift({value:e,isHistory:1,timestamp:(new Date).getTime()}),localStorage.setItem("search_history",JSON.stringify(t))}function d(e){var t=c();t=t.filter(function(t){return t.value!=e}),localStorage.setItem("search_history",JSON.stringify(t))}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),f=i(1),h=function(){function e(t,i){n(this,e),this.callback=t,this.option={cycle:i},this.timer=0,this.clock}return u(e,[{key:"fire",value:function(){var e=this,t=(new Date).getTime();t>this.timer+this.option.cycle?(this.callback(),this.timer=t):(clearTimeout(this.clock),this.clock=setTimeout(function(){e.callback()},this.option.cycle))}}]),e}();t.default=o}).call(t,i(0))},85:function(e,t,i){"use strict";(function(e){function n(t){f=t,e.ajax({url:"//api.bilibili.com/x/web-interface/article/up/list",type:"get",xhrFields:{withCredentials:!0}}).done(function(e){t.append(o(e.data)),setTimeout(function(){u.default.emit("right.grow")},1)}),r(t)}function o(e){var t=[];for(var i in e)t.push(a(e[i]));return[t.join("")].join("")}function a(e){return['<div class="up-item">','<a href="//space.bilibili.com/'+e.mid+'/#!/" target="_blank" class="face-holder">',"<img src="+(0,s.trimHttp)((0,s.formatImg)(e.avatar,48*(0,s.getDevicePixelRatio)(),48*(0,s.getDevicePixelRatio)()))+">",e.official_verify.type>-1?'<span class="verify-'+e.official_verify.type+'" title='+e.official_verify.desc+"></span>":"","</a>",'<div class="info-holder">','<div class="head">','<a href="//space.bilibili.com/'+e.mid+'/#!/" target="_blank" class="nick-name">'+e.uname+"</a>",'<div class="follow '+(e.following?"followed":"")+'" data-up-mid="'+e.mid+'">'+(e.following?"已关注":"关注")+"</div>","</div>",'<div class="dynamic"><span>'+c(e.publish_time)+'投稿了 </span><a href="//www.bilibili.com/read/cv'+e.id+'" target="_blank" class="arc-title">'+e.title+"</a></div>","</div>","</div>"].join("")}function r(t){e(t).on("click",".follow",function(t){function i(){n.hasClass("wait")||(n.addClass("wait"),e.ajax({url:"//api.bilibili.com/x/relation/modify",type:"post",xhrFields:{withCredentials:!0},data:{act:r,format:"json",re_src:115,fid:o,jsonp:"jsonp",csrf:s.cookie.get("bili_jct")}}).done(function(t){n.removeClass("wait"),0==t.code?1==r?(n.addClass("followed").text("已关注"),window.followGroupDialog?window.followGroupDialog(o,a,{onSubmitError:function(e){alert(e||"移动分组失败")}}):e.getScript("//static.hdslb.com/common/js/followGroupDialog.js",function(){window.followGroupDialog(o,a,{onSubmitError:function(e){alert(e||"移动分组失败")}})})):n.removeClass("followed").text("关注"):(0,s.toast)(e(n),t.message)}).fail(function(){n.removeClass("wait"),(0,s.toast)(e(n),"网络错误")}))}if(!s.cookie.get("DedeUserID"))return void(0,s.login)(function(){location.reload()});var n=e(t.currentTarget),o=n.attr("data-up-mid"),a=n.siblings("a").text(),r=1;if(o==s.cookie.get("DedeUserID"))return void(0,s.toast)(e(n),"不能关注自己");if(n.hasClass("followed")){var l=e('<div class="modal-box-holder">\n                    <div class="modal-box-mask"></div>\n                    <div class="modal-box">\n                    <div class="modal-head">\n                      <i class="modal-header-close"></i>\n                      <div class="modal-title">还是确认下吧...</div>\n                    </div>\n                    <div class="modal-body">你确认要取消关注<'+n.siblings("a").text()+'>吗？</div>\n                    <div class="modal-footer">\n                        <a class="modal-btn-primary">确认</a>\n                        <a class="modal-btn-default">取消</a>\n                      </div>\n                    </div>\n                  </div>');l.find(".modal-header-close,.modal-btn-default").click(function(){l.remove()}),l.find(".modal-btn-primary").click(function(){r=2,i(),l.remove()}),e("body").append(l)}else i()}),e(t).on("click",".fresh-btn",function(){h=parseInt((new Date).getTime()/1e3),e.ajax({url:"//api.bilibili.com/x/web-interface/article/up/list",type:"get",xhrFields:{withCredentials:!0}}).done(function(e){t.find(".up-item").remove(),t.find(".fresh-btn").hide(),t.append(o(e.data)),setTimeout(function(){u.default.emit("right.grow")},1)})})}function l(){setTimeout(function(){e.ajax({url:"//api.bilibili.com/x/web-interface/article/newcount",data:{pubtime:h}}).done(function(e){var t=e.data&&e.data.new_count;t>0&&f.find(".fresh-btn").text(t+"更新").show()}),l()},1e4)}function c(e){var t=Math.floor((new Date).getTime()/1e3),i=new Date;if(i.setHours(0),i.setMinutes(0),i.setSeconds(0),i=Math.floor(i.getTime()/1e3),t-e<60)return"刚刚";if(t-e<3600)return Math.floor((t-e)/60)+"分钟前";if(t-e<86400)return new Date(1e3*e).getDate()==(new Date).getDate()?Math.floor((t-e)/3600)+"小时前":"昨天";if(t-e<172800&&i-e<86400)return"昨天";var n=new Date(1e3*e),o=n.getMonth()+1,a=n.getDate(),r=o+"-"+a;return n.getFullYear()===(new Date).getFullYear()?r:n.getFullYear()+"-"+r}Object.defineProperty(t,"__esModule",{value:!0});var s=i(1),d=i(13),u=function(e){return e&&e.__esModule?e:{default:e}}(d),f=void 0,h=parseInt((new Date).getTime()/1e3);window.original&&0==window.original.rid&&l(),t.default=n}).call(t,i(0))},86:function(e,t,i){"use strict";(function(e){function n(t){s=e(t),d=s.find(".rank-tabs-bar .rank-tabs-list"),u=s.find(".rank-list"),f=s.find(".complete-rank"),o().done(function(e){h=e.data,r(),l(h[0]&&h[0].id)})}function o(){return e.ajax({url:"//api.bilibili.com/x/article/rank/categories",type:"get",data:{jsonp:"jsonp"}})}function a(t){return m[t]?m[t]:(e.ajax({url:"//api.bilibili.com/x/article/rank/list",type:"get",data:{cid:t,jsonp:"jsonp"}}).done(function(e){m[t]=e.data||[],l(t)}),!1)}function r(){for(var t in h)!function(t){var i=h[t],n=e("<li>"+i.name+"</li>");d.append(n),n.hover(function(){g!=i.id&&(g=i.id,l(i.id),n.addClass("on").siblings().removeClass("on"))})}(t);d.find("li:eq(0)").addClass("on")}function l(e){var t=a(e);if(t){u.html("");for(var i in t){if(!(i<10))break;var n=t[i];u.append('<li class="item"><span class="rank-index">'+(parseInt(i)+1)+'</span><a href="//www.bilibili.com/read/cv'+n.id+'" target="_blank" title="'+(0,c.filterChar)(n.title)+'">'+(0,c.filterChar)(n.title)+"</a></li>")}f.attr("href","//www.bilibili.com/read/ranking#type="+e)}else u.html("<span>loading...</span>")}Object.defineProperty(t,"__esModule",{value:!0});var c=i(1),s=void 0,d=void 0,u=void 0,f=void 0,h=[],m={},g=void 0;t.default=n}).call(t,i(0))},87:function(e,t,i){"use strict";(function(e){var t=!1;e(document).on("scroll.toTop",function(){var i=void 0;window.scrollY>window.innerHeight?(i=!0,e(".to-top").addClass("on")):(i=!1,e(".to-top").removeClass("on")),i!=t&&(t=i,i?e(".to-top").addClass("on"):e(".to-top").removeClass("on"))}),e(".to-top").click(function(){e("html, body").animate({scrollTop:0},300)})}).call(t,i(0))},88:function(e,t,i){"use strict";(function(e){function t(t,n){var o=[window.scrollY,window.innerHeight+window.scrollY,t,t+n];o=o.sort(function(e,t){return e>t}),o[3]-o[0]-window.innerHeight<=n/2&&(i.read_BannerRight_show=!0,e(document).off("scroll.read_BannerRight_show"))}var i=window.reportMsgObj;e(document).on("click",".nav-tab-bar .tab-item",function(){i.read_category_click=!0}),e(document).on("click",".categories-bar .tag-item",function(){i.read_SubCategory_click=!0}),e(document).on("click",".article-item .article-title",function(){window.original&&0==window.original.rid?i.read_category_title_click=!0:i.read_home_title_click=!0}),e(document).on("click",".article-item .up-content",function(){window.original&&0!=window.original.rid?i.read_home_user_click=!0:i.read_category_user_click=!0}),e(document).on("click",".up-list .follow",function(){i.read_NewUpdate_follw_click=!0}),e(document).on("click",".up-list .face-holder",function(){i.read_NewUpdate_user_click=!0}),e(document).on("click",".up-list .arc-title",function(){i.read_NewUpdate_title_click=!0}),e(document).on("click",".search-module .search-word-panel .suggest-item",function(t){i.ClickSuggestWord=e(t.currentTarget).find("a").val()}),e(document).on("click",".rank-module .rank-list .item",function(){i.read_RankList_click=!0}),e(document).on("click",".rank-module .complete-rank",function(){i.read_RankAll_click=!0}),e(document).on("click",".right-side .more .ac-link",function(){i.read_ArticleUpload_click=!0});var n=e(".web-show-c .web-show-c-link");if(n.length){var o=n.offset().top,a=n.height();t(o,a),e(document).on("scroll.read_BannerRight_show",function(){t(o,a)})}var r=location.hash.match(/rid=([0-9]+)/)&&location.hash.match(/rid=([0-9]+)/)[1]||window.original&&window.original.rid,l=0==r?"homeTab":"category_"+r,c=void 0;/\?*from=/.test(location.search)&&(c=location.search.match(/from=([^&]+)/)[1],e.ajax({url:"https://api.bilibili.com/x/article/addview",data:{page:l,from:c}}))}).call(t,i(0))}},[78]);